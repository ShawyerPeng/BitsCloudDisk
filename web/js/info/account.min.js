!function(modules){function __webpack_require__(moduleId){if(installedModules[moduleId])return installedModules[moduleId].exports;var module=installedModules[moduleId]={exports:{},id:moduleId,loaded:!1};return modules[moduleId].call(module.exports,module,module.exports,__webpack_require__),module.loaded=!0,module.exports}var installedModules={};return __webpack_require__.m=modules,__webpack_require__.c=installedModules,__webpack_require__.p="/static/js/",__webpack_require__(0)}({0:function(module,exports,__webpack_require__){var __WEBPACK_LOCAL_MODULE_0__;!(__WEBPACK_LOCAL_MODULE_0__=function(require,exports,module){var $=__webpack_require__(5158837218028295),AccountPage=__webpack_require__(0x547fcfbd3c3af),AppPassword=__webpack_require__(7669276965581298),TFAuth=__webpack_require__(8104423438877732);$(document).ready(function(){var input=document.createElement("input");input.setAttribute("type","text");new AccountPage,new AppPassword,new TFAuth})}.call(exports,__webpack_require__,exports,module)),!function(){var __WEBPACK_AMD_REQUIRE_ARRAY__=[__WEBPACK_LOCAL_MODULE_0__];(function(){}).apply(null,__WEBPACK_AMD_REQUIRE_ARRAY__)}()},0xe31746682a60c:function(module,exports){module.exports='<div class="dialog-content">\r\n  <div id="app-psw-delete-confirm" class="app-psw-delete-panel">\r\n    <div class="info confirm-info"><%= Constants.DELETE_APP_PASSWORD_CONFIRM_MSG %></div>\r\n  </div><!--app-psw-delete-confirm-->\r\n  <div id="app-psw-delete-fail" class="app-psw-delete-panel">\r\n    <div class="info return-info"><%= Constants.DELETE_APP_PASSWORD_FAILED_MSG %></div>\r\n  </div><!--app-psw-delete-fail-->\r\n</div>\r\n'},8109100300960702:function(module,exports){module.exports='  <div id="purge-more" class="nodisp">\r\n    <div class="dialog-content"></div>\r\n  </div>\r\n  \r\n  <div id="fill-reason" class="nodisp">\r\n    <div class="dialog-content">\r\n      \r\n      <p><%= Constants.FILL_IN_REASON %></p>\r\n      \r\n      <div id="degrade-reason">\r\n        <div class="controls">\r\n          <label class="checkbox">\r\n            <input type="checkbox" value="<%= Constants.DEGRADE_REASON_1 %>" name="reason1"><%= Constants.DEGRADE_REASON_1 %>\r\n          </label>\r\n        </div>\r\n        <div class="controls">\r\n          <label class="checkbox">\r\n            <input type="checkbox" value="<%= Constants.DEGRADE_REASON_2 %>" name="reason2"><%= Constants.DEGRADE_REASON_2 %>\r\n          </label>\r\n        </div>\r\n        <div class="controls">\r\n          <label class="checkbox">\r\n            <input type="checkbox" value="<%= Constants.DEGRADE_REASON_3 %>" name="reason3"><%= Constants.DEGRADE_REASON_3 %>\r\n          </label>\r\n        </div>\r\n        <div class="controls">\r\n          <label class="checkbox">\r\n            <input type="checkbox" value="<%= Constants.DEGRADE_REASON_4 %>" name="reason4"><%= Constants.DEGRADE_REASON_4 %>\r\n          </label>\r\n        </div>\r\n        <div class="controls">\r\n          <label class="checkbox">\r\n            <input type="checkbox" value="<%= Constants.DEGRADE_REASON_5 %>" name="reason5"><%= Constants.DEGRADE_REASON_5 %>\r\n          </label>\r\n        </div>\r\n        \r\n        <p><%= Constants.OTHER_REASON_INDICATOR %></p>\r\n        \r\n        <textarea id="other-reason" name="otherReason"></textarea>\r\n      </div>\r\n    </div>\r\n    \r\n  </div>\r\n'},6989671997291023:function(module,exports){module.exports='<div class="dialog-content input-panel">\r\n  <form class="form-horizontal" id="modify_email_form" autocomplete="off">\r\n    <div class="control-group new-email">\r\n      <label class="control-label"><%= Constants.NEW_EMAIL %></label>\r\n      <div class="controls">\r\n        <input name="new-email-account" type="text" size="30" class="span3">\r\n      </div>        \r\n      <div class="email-update-success hide">\r\n        <div class="warning-container"><%= Constants.EMAIL_UPDATE_SUCCESS_MSG %><a href="http://help.jianguoyun.com/?p=1789" target="_blank">http://help.jianguoyun.com/?p=1789</a></div>\r\n        <div class="control-group">\r\n          <button type="button" class="btn btn-success email-over-ok"><%= Constants.OK %></button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    \r\n    <div class="control-group password">\r\n      <label class="control-label"><%= Constants.CURRENT_PASSWORD %></label>\r\n      <div class="controls">\r\n        <input name="current-password" type="password" size="30" class="span3" />\r\n      </div>\r\n    </div>\r\n    \r\n    <div class="control-group two-factor-auth nodisp">\r\n      <label class="control-label"><%= Constants.PASSCODE %></label>\r\n      <div class="controls">\r\n        <input name="two-factor-auth-code" type="text" size="30" class="span3" placeholder="<%= Constants.PLEASE_ENTER_PASSCODE %>"/>\r\n      </div>\r\n    </div>\r\n    <div id="tf_time_tip" class="alert alert-info nodisp text-center"></div> \r\n  </form>\r\n</div>\r\n<div class="dialog-content warn-panel nodisp">\r\n    <div class="warning-container"><span class="warning-tip"></span></div>\r\n</div>\r\n<div class="dialog-content success-panel nodisp">\r\n    <div class="warning-container">\r\n      <%= Constants.EMAIL_UPDATE_SUCCESS_MSG %><a href="http://help.jianguoyun.com/?p=1789" target="_blank">http://help.jianguoyun.com/?p=1789</a>\r\n    </div>\r\n</div>\r\n'},0x4568dccaef3b0:function(module,exports){module.exports='<div class="dialog-content">\r\n  <form class="form-horizontal" id="modify_pwd_form">\r\n    <div class="control-group">\r\n      <label class="control-label"><%= Constants.OLD_PASSWORD %></label>\r\n      <div class="controls">\r\n        <input id="old_password" name="old_password" type="password" size="30" class="span3">\r\n      </div>\r\n    </div>\r\n    \r\n    <div class="control-group" id="password-row">\r\n      <label class="control-label"><%= Constants.NEW_PASSWORD %></label>\r\n      <div class="controls">\r\n        <input id="new_password" name="new_password" type="password" size="30" class="span3" placeholder="<%= Constants.PASSWORD_HINT %>" rel="tooltip" title="<%= Constants.PASSWORD_HINT %>" data-toggle="tooltip" data-placement="bottom">\r\n      </div>\r\n    </div>\r\n    \r\n    <div class="control-group">\r\n      <label class="control-label"><%= Constants.RETYPE_PASSWORD %></label>\r\n      <div class="controls">\r\n        <input id="retype_new_password" name="retype_new_password" type="password" size="30" class="span3" placeholder="<%= Constants.RETYPE_PASSWORD_HINT %>" rel="tooltip" title="<%= Constants.RETYPE_PASSWORD_HINT %>" data-toggle="tooltip" data-placement="bottom">\r\n      </div>\r\n    </div>\r\n    \r\n  </form>\r\n</div>\r\n '},6849031306591421:function(module,exports){module.exports='<div class="dialog-content">\r\n  <div id="unlink-confirm" class="unlink-panel">\r\n    <div class="info unlink-confirm-info"><%= Constants.UNLINK_DEVICES_PROMT_MSG %></div>\r\n  </div>\r\n  \r\n  <div id="unlink-indicator" class="unlink-panel">\r\n    <div style="text-align:center; padding-top:10px;"><%= Constants.UNLINK_DEVICE_RUNNING_MSG_LINE0 %></div>\r\n    <div style="text-align:center; padding-bottom:40px;"><%= Constants.UNLINK_DEVICE_RUNNING_MSG_LINE1 %></div>\r\n  </div>\r\n \r\n  <div id="unlink-success" class="unlink-panel">\r\n    <div class="info unlink-success-info"><%= Constants.UNLINK_DEVICES_SUCCESS_MSG %></div>\r\n  </div>\r\n \r\n  <div id="unlink-fail" class="unlink-panel">\r\n    <div class="info unlink-fail-info"><%= Constants.UNLINK_DEVICES_FAIL_MSG %></div>\r\n  </div>\r\n</div>\r\n'},0x547fcfbd3c3af:function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_RESULT__=function(require,exports,module){var $=__webpack_require__(5158837218028295),LoadingIndicator=(__webpack_require__(7813475321478606),__webpack_require__(0x4017662b84c16),__webpack_require__(7338194579372937)),MessageNotifier=__webpack_require__(7602224003619457),PubSub=__webpack_require__(0x46ff2984bc319),NutstoreBaseView=__webpack_require__(0xfcd65196d3697),ModifyEmailBoxView=__webpack_require__(0x61775c0b7bc8e),ModifyPasswordBoxView=__webpack_require__(0x5ea32c0026dc9),DegradeBoxView=__webpack_require__(0x51d548b6691b5),UnlinkDevicesBoxView=__webpack_require__(0x3c7f0ddeba7d5),AccountPage=NutstoreBaseView.extend({initialize:function(){this.accountState=parseInt(Constants.ACCOUNT_STATE,10),this.month=null,this.serverDate=null,this.localDate=null,this.serverDateTimer=null,this.initTabs(),this.initOthers(),this._subscribe()},initTabs:function(){$("#mytabs").tabs("li > a");var target;target="undefined"!=typeof Constants&&Constants.active_tab?"#"+Constants.active_tab:window.location.hash,target&&target.length>1&&$("#mytabs li a").each(function(){var href=$(this).attr("href");href===target&&$(this).click()}),$("#mytabs").find("li > a").click(function(e){window.location.hash=$(e.currentTarget).attr("href")})},validate_nickname:function(s){for(var c,cc,i=0;i<s.length;i++)if(c=s.charAt(i),cc=s.charCodeAt(i),!(!(cc>=0&&cc<=127&&"-"!==c&&"_"!==c)||c>="0"&&c<="9"||c>="a"&&c<="z"||c>="A"&&c<="Z"||" "===c))return!1;return!0},save_nickname:function(){var self=this,has_error=!1,nickname=$("#input-nick").val()||"";return nickname.length>20?($("#info-error").text(Constants.NICK_TOO_LONG),has_error=!0):self.validate_nickname($.trim(nickname))?""===$.trim(nickname)&&($("#info-error").text(Constants.ERROR_NICKNAME_EMPTY),has_error=!0):($("#info-error").text(Constants.NICK_INVALID),has_error=!0),has_error?void $("#info-error").show():($("#info-error").hide().text(""),LoadingIndicator.start($("#info")),void $.ajax({url:"/d/ajax/userop/updateNickname",type:"POST",data:{nickname:nickname},error:function(xhr){$("#info-error").text(Constants.NICK_UPDATE_FAILED).show()},success:function(data,textStatus,xhr){200!==xhr.status?$("#info-error").text(Constants.NICK_UPDATE_FAILED).show():($("#modify-nick-row").hide(),$("#current-nick-row").show(),$("#currentnick").text(nickname),$("#modify_nick_success").fadeIn().fadeOut(3e3))},complete:function(){LoadingIndicator.finish($("#info"))}}))},drop_nickname:function(){$("#modify-nick-row").hide(),$("#current-nick-row").show(),$("#nick-error-row").hide(),$("#info-error").hide()},checkDegrade:function(){$.ajax({url:"/d/ajax/degradeStorageLimit",type:"GET",dataType:"json",context:this,cache:!1,error:function(xhr,status,error){MessageNotifier.show(Constants.COMMAND_CAN_NOT_BE_EXECUTED_ON_SERVER)},success:function(data,textStatus,xhr){if(200!==xhr.status)return void MessageNotifier.show(Constants.COMMAND_CAN_NOT_BE_EXECUTED_ON_SERVER);new DegradeBoxView({data:data})}})},stateAssignment:function(){switch(1===this.accountState?($("#flowrate-portion").show(),$("#valid_time").hide()):($("#space-portion").show(),$("#valid_time").show()),this.accountState){case 1:$("#upgrade-button").css("display","inline-block"),$("#account_type").text(Constants.COMMON_VERSION);break;case 2:$("#account_type").text(Constants.PROFESSIONAL_VERSION),$("#renew").text(Constants.RECHARGE_AND_RENEW),this.isExpired()&&$("#degrade-button").css("display","inline-block");break;case 3:$("#account_type").text(Constants.PROFESSIONAL_ADVANCED_VERSION),$("#renew").text(Constants.RECHARGE_AND_RENEW),this.isExpired()&&$("#degrade-button").css("display","inline-block");break;case 4:$("#account_type").text(Constants.TEAM_MEMBER),$("#renew").hide();break;case 5:$("#account_type").text(Constants.TEAM_ADMIN),Constants.IS_FREE_TRIAL?$("#renew").text(Constants.BUY_NUTSTORE_TEAM_EDITION).attr("href","/d/team/payment?type=new"):($("#renew").text(Constants.RECHARGE_AND_RENEW).attr("href","/d/team/payment?type=recharge"),$("#alter").css("display","inline-block"));break;case 6:$("#account_type").text(Constants.FROZEN_STATE),this.isExpired()&&$("#degrade-button").css("display","inline-block")}},isExpired:function(){var now=new Date;now=now.getTime();var str=Constants.member_exp_date.replace(/-/g,"/"),expTime=new Date(str);return expTime=expTime.getTime(),expTime<now},initOthers:function(){var self=this;this.stateAssignment(),this._setupEmailUpdateEvents(),this._setupUnlinkDevicesEvent(),$("#modify-nick").click(function(e){e.preventDefault(),e.stopPropagation(),$("#current-nick-row").hide(),$("#modify-nick-row").show();var current=$("#currentnick").text();$("#input-nick").focus().val(current)}),$("#input-nick").keyup(function(e){var code=e.keyCode?e.keyCode:e.which;13===code?(e.preventDefault(),e.stopPropagation(),self.save_nickname()):27===code&&self.drop_nickname()}),$("#save-nick").click(function(e){return self.save_nickname(),!1}),$("#cancel-nick").click(function(e){return self.drop_nickname(),!1}),$("#modify_passcode").click(function(e){new ModifyPasswordBoxView;return!1}),$("#degrade-button").click(function(e){return self.checkDegrade(),!1})},_setupEmailUpdateEvents:function(){$("#modify-email").click(function(e){new ModifyEmailBoxView({currentEmail:$("#current-email-row").find(".text").text()});return!1})},_setupUnlinkDevicesEvent:function(){$("#unlink-devices-btn").click(function(e){var displayname,username=$("#currentemail").text(),nickname=$("#currentnick").text();displayname=nickname.length>0?nickname+"("+username+")":username;new UnlinkDevicesBoxView({displayname:displayname});return!1})},_degradeSuccessAct:function(){$("#valid_time").hide(),$("#account_type").text(Constants.COMMON_VERSION),$("#upgrade-button").show()},_subscribe:function(){PubSub.subscribe("degrade-success",$.proxy(this._degradeSuccessAct,this)),PubSub.subscribe("modify-email-success",$.proxy(this._modifyEmailSuccessAct,this)),PubSub.subscribe("modify-password-success",$.proxy(this._modifyPasswordSuccessAct,this))},_modifyEmailSuccessAct:function(username){$("#current-email-row").show().find(".text").text(username),$("#current-email-row").find(".modify_email_info").stop(!0,!0).fadeIn().fadeOut(8e3)},_modifyPasswordSuccessAct:function(){$("#modify_pwd_success").fadeIn().fadeOut(3e3)}});return AccountPage}.call(exports,__webpack_require__,exports,module),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},7669276965581298:function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_RESULT__=function(require,exports,module){var $=__webpack_require__(5158837218028295),MessageNotifier=(__webpack_require__(7813475321478606),__webpack_require__(0x4017662b84c16),__webpack_require__(7602224003619457)),LoadingIndicator=__webpack_require__(7338194579372937),AjaxError=__webpack_require__(0xdcdcc9b7a2300),PubSub=__webpack_require__(0x46ff2984bc319),NutstoreBaseView=__webpack_require__(0xfcd65196d3697),AppPswBoxView=__webpack_require__(0xb5039270caca4),AppPassword=NutstoreBaseView.extend({initialize:function(){this._initElements(),this._bindEvents(),this._subscribe()},_initElements:function(){this._inputPanel=$("#pwd-input-panel"),this._inputStep1=this._inputPanel.find("> .step1"),this._inputStep2=this._inputPanel.find("> .step2"),this._newAppName=this._inputStep1.find("#new-app-name"),this._appList=$("#app-list"),this._appEmptyTip=$("#app-none"),this._rowTemplate=$("#app-pwd-template")},_bindEvents:function(){this._bindDeletion(),this._bindAdding(),this._bindPasswordDisplay()},_bindAdding:function(){var self=this;$("#create-pwd").bind("click",function(e){e.preventDefault(),e.stopPropagation(),self._inputPanel.is(":visible")||(self._inputPanel.show(),self._inputStep1.show(),self._inputStep2.hide(),self._newAppName.val("").focus())}),$("#generate-new-psw").bind("click",function(e){e.preventDefault(),e.stopPropagation(),self.checkToCreatePassword()}),$("#generate-pwd-done").bind("click",function(e){e.preventDefault(),e.stopPropagation(),self._inputPanel.hide(),self._pendingRow&&(self._appList.append(self._pendingRow).show(),self._appEmptyTip.hide())}),this._newAppName.bind("keyup",function(e){if(13===e.keyCode||13===e.which)return self.checkToCreatePassword(),!1})},_errorMsgFromCode:function(code){var dict={DuplicateName:Constants.GENERATE_PASSWORD_ERROR_DUPLICATE_NAME,TooManyASPs:Constants.GENERATE_PASSWORD_ERROR_TOO_MANY};return dict[code]||Constants.COMMAND_CAN_NOT_BE_EXECUTED_ON_SERVER},checkToCreatePassword:function(){var name=$.trim(this._newAppName.val());return name.length<1?void this._newAppName.select().focus():void this.requestToGeneratePasswordByName(name)},requestToGeneratePasswordByName:function(name){LoadingIndicator.start(document.body),$.ajax({url:"/d/ajax/userop/generateAsp",type:"POST",dataType:"json",data:{asp_name:name},context:this,success:function(data,textStatus,xhr){if(data&&200===xhr.status){var $row=this._rowFromData(data);this._pendingRow=$row,this._inputStep1.hide(),this._inputStep2.show().find(".displayed-psw").text(data.credential)}else MessageNotifier.show(Constants.COMMAND_CAN_NOT_BE_EXECUTED_ON_SERVER)},error:function(xhr){var errorMsg,errorObject=AjaxError.parse(xhr),errorCode=errorObject.getCode();errorObject.getPayload();errorMsg=this._errorMsgFromCode(errorCode),MessageNotifier.show(errorMsg)},complete:function(){LoadingIndicator.finish(document.body)}})},_rowFromData:function(data){if(data){var name=$("<span>").html(data.name).text(),password=data.credential,creationTime=data.creationTime,$ele=this._rowTemplate.clone().removeClass("hide").addClass("app-psw");return $ele.attr("data-unique-name",name),$ele.find(".delete a").attr("data-app-name",name),$ele.find(".name").text(name),$ele.find(".date").text(creationTime),$ele.find(".password .detail").text(password),$ele}return null},_bindPasswordDisplay:function(){this._appList.delegate(".show-pwd","click",function(e){var $this=$(e.currentTarget),$password=$this.siblings(".detail");return $this.hide(),$password.show(),!1})},_bindDeletion:function(){$("#app-list").delegate(".app-psw-delete","click",function(e){var name=$(this).attr("data-app-name");new AppPswBoxView({appName:name});return!1})},_deleteSuccessAct:function(appName){$("#app-list").find('tr[data-unique-name="'+appName+'"]').remove(),0===$("#app-list").find(".app-psw").length&&($("#app-list").hide(),$("#app-none").show())},_subscribe:function(){PubSub.subscribe("delete-app-password-success",$.proxy(this._deleteSuccessAct,this))}});return AppPassword}.call(exports,__webpack_require__,exports,module),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},0xb5039270caca4:function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_RESULT__=function(require,exports,module){var $=__webpack_require__(5158837218028295),_=__webpack_require__(7813475321478606),PubSub=(__webpack_require__(0x4017662b84c16),__webpack_require__(0x46ff2984bc319)),NutstoreBaseView=__webpack_require__(0xfcd65196d3697),ModalBaseView=__webpack_require__(0x6c11478f788b3),AppPswBoxTemplate=__webpack_require__(0xe31746682a60c),AppPswBoxView=NutstoreBaseView.extend({tagName:"div",className:"control-row",template:_.template(AppPswBoxTemplate),initialize:function(){this.render();var self=this;this._modalView=new ModalBaseView({idAttr:"app-psw-delete-box",title:Constants.DELETE_APP_PASSWORD+Constants.COLON+this.options.appName,okText:Constants.OK,cancelText:Constants.CANCEL,bodyView:this.$el,confirmAction:function(modalView){self.tryToDeleteAppPassword(modalView)}}),this._modalView.addChildView(this),this._modalView.$el.css({width:"250px","margin-left":"-125px"}),this.$(".app-psw-delete-panel").hide(),this.$("#app-psw-delete-confirm").show()},render:function(){return this.$el.html(this.template({})),this},tryToDeleteAppPassword:function(modalView){var appName=this.options.appName;modalView.startLoading(),$.ajax({url:"/d/ajax/userop/revokeAsp",type:"POST",data:{asp_name:appName},context:this,success:function(data,textStatus,xhr){200!==xhr.status?(this.$(".app-psw-delete-panel").hide(),this.$("#app-psw-delete-fail").show(),modalView.hideOkButton(),modalView.setCancelText(Constants.CLOSE)):(PubSub.publish("delete-app-password-success",[appName]),modalView.hideModal())},error:function(xhr){this.$(".app-psw-delete-panel").hide(),this.$("#app-psw-delete-fail").show(),modalView.hideOkButton(),modalView.setCancelText(Constants.CLOSE)},complete:function(){modalView.endLoading()}})}});return AppPswBoxView}.call(exports,__webpack_require__,exports,module),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},0x51d548b6691b5:function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_RESULT__=function(require,exports,module){var $=__webpack_require__(5158837218028295),_=__webpack_require__(7813475321478606),MessageNotifier=(__webpack_require__(0x4017662b84c16),__webpack_require__(7602224003619457)),formatter=__webpack_require__(5398090840435253),PubSub=__webpack_require__(0x46ff2984bc319),NutstoreBaseView=__webpack_require__(0xfcd65196d3697),ModalBaseView=__webpack_require__(0x6c11478f788b3),DegradeBoxTemplate=__webpack_require__(8109100300960702),DegradeBoxView=NutstoreBaseView.extend({tagName:"div",className:"control-row",template:_.template(DegradeBoxTemplate),initialize:function(){this.render();var self=this;if(this._modalView=new ModalBaseView({idAttr:"degrade_box",title:Constants.ATTENTION_TITLE,bodyView:this.$el,confirmAction:function(modalView){self.requestDegrade(modalView)}}),this._modalView.addChildView(this),this.data.degradeStorageLimit>=this.data.consumedStorage)this._modalView.$el.css({width:"440px","margin-left":"-220px"}),this.$fillReason.show(),this._modalView.setOKText(Constants.OK),this._modalView.setCancelText(Constants.CLOSE);else{var s=Constants.DEGRADE_INDICATOR;s=s.replace(/%s/g,formatter.stringOfSize(this.data.degradeStorageLimit)),this.$purgeMore.show().find(".dialog-content").text(s),this._modalView.hideOkButton(),this._modalView.setCancelText(Constants.CLOSE)}},render:function(){return this.$el.html(this.template({})),this.data=this.options.data,this.$purgeMore=this.$("#purge-more"),this.$fillReason=this.$("#fill-reason"),this},requestDegrade:function(modalView){var checkboxes=this.$("input:checked"),otherReason=$.trim(this.$("#other-reason").val());if(checkboxes.length<=0&&""===otherReason)return void modalView.showErrorTip(Constants.REASON_EMPTY);if(otherReason.length>300)return void modalView.showErrorTip(Constants.REASON_TOO_LONG);var dict={state:1};checkboxes.each(function(){var k=$(this).attr("name");dict[k]=$(this).val()}),""!==otherReason&&(dict.otherReason=otherReason),$.ajax({url:"/d/ajax/degrade",type:"POST",data:dict,context:this,cache:!1,error:function(xhr,status,error){MessageNotifier.show(Constants.DEGRADE_FAILED)},success:function(data,textStatus,xhr){return 200!==xhr.status?void MessageNotifier.show(Constants.DEGRADE_FAILED):(MessageNotifier.show(Constants.DEGRADE_COMMON_SUCCESS),void PubSub.publish("degrade-success"))},complete:function(){modalView.hideModal()}})}});return DegradeBoxView}.call(exports,__webpack_require__,exports,module),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},0x61775c0b7bc8e:function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_RESULT__=function(require,exports,module){var $=__webpack_require__(5158837218028295),_=__webpack_require__(7813475321478606),NutstoreBaseView=(__webpack_require__(0x4017662b84c16),__webpack_require__(0xfcd65196d3697)),ModalBaseView=__webpack_require__(0x6c11478f788b3),AjaxError=__webpack_require__(0xdcdcc9b7a2300),PubSub=__webpack_require__(0x46ff2984bc319),PatternUtils=__webpack_require__(0x5da0d3b428ba9),VerifyPhoneView=__webpack_require__(290811116529171),ModifyEmailBoxTemplate=__webpack_require__(6989671997291023),ModifyEmailBoxView=NutstoreBaseView.extend({tagName:"div",className:"control-row",template:_.template(ModifyEmailBoxTemplate),initialize:function(){this.render();var self=this;this._modalView=new ModalBaseView({idAttr:"modify_email_box",title:Constants.MODIFY_EMAIL,okText:Constants.OK,cancelText:Constants.CANCEL,bodyView:this.$el,confirmAction:function(modalView){modalView.clearErrorTip(),"input"===self._showPanel?self.beginToUpdateEmail(modalView):"warn"===self._showPanel&&(self.requestToUpdateEmailWithData(self.requestData,modalView),self.showPanel("input"))}}),this._modalView.addChildView(this),this.$("input").placeholder(),this.isNormal=!AccountInfo.tfauth_enabled,this._showPanel="input",this.requestData={},this.updateInputsLayout(),this.$inputPanel.find(".control-group").removeClass("error"),this.$inputPanel.find("input").val("").end().show(),this.$inputPanel.find('input[name="new-email-account"]').focus(),this.showPanel("input"),this.$errorDiv.hide(),this.$tfTimeDiv.hide(),AccountInfo.tfauth_enabled&&(PageInfo.authViaWechat||PageInfo.authViaPhone)&&this._requestToSendTFSms()},render:function(){return this.$el.html(this.template({})),this.$inputPanel=this.$(".dialog-content.input-panel"),this.$warnPanel=this.$(".dialog-content.warn-panel"),this.$successPanel=this.$(".dialog-content.success-panel"),this.$errorDiv=this.$("#modify_email_error"),this.$tfTimeDiv=this.$("#tf_time_tip"),this},_errorMsgFromCode:function(status,code){var statusDict={400:Constants.MODIFY_EMAIL_FAIL_INCORRECT,409:Constants.MODIFY_EMAIL_FAIL_USED},dict={AuthenticationFailed:Constants.MODIFY_EMAIL_VALIDATION_FAILED,NeedTwoFactorsAuthentication:Constants.MODIFY_EMAIL_FAIL_UNKNOW};return statusDict[status]||dict[code]||Constants.MODIFY_EMAIL_FAIL_UNKNOW},showPanel:function(panel){this._showPanel=panel,this.$inputPanel.toggle("input"===panel),this.$warnPanel.toggle("warn"===panel),this.$successPanel.toggle("success"===panel)},showTFAuthFailedTipWithTimestamp:function(timestamp,modalView){var date=new Date;date.setTime(timestamp),modalView.showErrorTip(Constants.ERROR_MSG_PASSCODE),this.$tfTimeDiv.show().text(Constants.TF_AUTH_ERROR_TIME_HINT+date.toLocaleTimeString())},updateInputsLayout:function(){this.$inputPanel.find(".control-group.two-factor-auth").toggle(!this.isNormal)},resetPwdAndCode:function(){this.$inputPanel.find('input[name="current-password"]').val(""),this.$inputPanel.find('input[name="two-factor-auth-code"]').val(""),this.$inputPanel.find(".control-group.new-email, .control-group.password").show(),this.$inputPanel.find(".control-group.two-factor-auth").toggle(!this.isNormal)},showEmailUpdateWarnDialog:function(newEmail){var emailNode=$("<span>").addClass("changed-email").text(newEmail);this.$warnPanel.find(".tip-container").show(),this.$warnPanel.find(".email-update-success").hide(),this.$warnPanel.find(".warning-tip").html(Constants.CONFIRM_MODIFIED_EMAIL_INFO.replace("%s",emailNode[0].outerHTML))},beginToUpdateEmail:function(modalView){var prevEmail=null,$emailInput=this.$('input[name="new-email-account"]'),$pwdInput=this.$('input[name="current-password"]'),$passcodeInput=this.$('input[name="two-factor-auth-code"]'),newEmail=$.trim($emailInput.val()),password=$pwdInput.val(),passcode=$passcodeInput.val(),currentEmail=this.options.currentEmail;if(currentEmail===newEmail)return void modalView.hideModal();if(!PatternUtils.emailPattern.test(newEmail))return $("#modify_email_error").text(Constants.MODIFY_EMAIL_INVALID).show(),void $emailInput.parents(".control-group").eq(0).addClass("error");if($("#modify_email_error").hide(),$emailInput.parents(".control-group").eq(0).removeClass("error"),0===password.length)return void $pwdInput.parents(".control-group").eq(0).addClass("error");if($pwdInput.parents(".control-group").eq(0).removeClass("error"),!this.isNormal){if(0===passcode.length)return void $passcodeInput.parents(".control-group").eq(0).addClass("error");$passcodeInput.parents(".control-group").eq(0).removeClass("error")}var data={username:newEmail,password:password};this.requestData=data,this.isNormal||(data.tfauth=passcode),prevEmail!==newEmail?(this.showPanel("warn"),this.showEmailUpdateWarnDialog(newEmail),prevEmail=newEmail):this.requestToUpdateEmailWithData(this.requestData,modalView)},requestToUpdateEmailWithData:function(data,modalView){var self=this,cbData=data,cdModalView=modalView,failWithMessage=function(message){modalView.showErrorTip(message),self.$tfTimeDiv.hide(),self.resetPwdAndCode()};modalView.startLoading(),$.ajax({url:"/d/ajax/userop/updateUsername",type:"POST",data:data,context:this,error:function(xhr,status,error){var errorMsg,errorObject=AjaxError.parse(xhr),errorCode=errorObject.getCode(),payload=errorObject.getPayload();if(errorMsg=this._errorMsgFromCode(xhr.status,errorCode),401===xhr.status&&"TwoFactorsAuthenticationFailed"===errorCode?this.showTFAuthFailedTipWithTimestamp(payload,modalView):403===xhr.status&&"NeedTwoFactorsAuthentication"===errorCode?(this.updateInputsLayout(),failWithMessage(errorMsg)):failWithMessage(errorMsg),"NeedSmsAuthentication"===errorCode){modalView.$el.hide();new VerifyPhoneView({callback:function(){self.requestToUpdateEmailWithData(cbData,cdModalView)}})}},success:function(response,textStatus,xhr){modalView.$el.show(),200===xhr.status?(PubSub.publish("modify-email-success",[data.username]),this.showPanel("success"),modalView.hideOkButton(),modalView.setCancelText(Constants.OK)):failWithMessage(Constants.MODIFY_EMAIL_FAIL_UNKNOW)},complete:function(){modalView.endLoading()}})},_requestToSendTFSms:function(){this._modalView.startLoading(),$.ajax({url:"/d/ajax/tfauth/sendSms",type:"POST",data:{is_login:!0},cache:!1,context:this,success:function(res,status,xhr){PageInfo.auth_via_phone?this._modalView.showErrorTip(Constants.TFAUTH_SEND_SMS_SUCCEED,!0):PageInfo.auth_via_wechat&&this._modalView.showErrorTip(Constants.TFAUTH_SEND_WECHAST_SMS_SUCCEED,!0)},error:function(xhr,status,error){this._modalView.showErrorTip(Constants.GENERAL_ERROR_MSG)},complete:function(){this._modalView.endLoading()}})}});return ModifyEmailBoxView}.call(exports,__webpack_require__,exports,module),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},0x5ea32c0026dc9:function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_RESULT__=function(require,exports,module){var $=__webpack_require__(5158837218028295),_=__webpack_require__(7813475321478606),PubSub=(__webpack_require__(0x4017662b84c16),__webpack_require__(0x46ff2984bc319)),NutstoreBaseView=__webpack_require__(0xfcd65196d3697),ModalBaseView=__webpack_require__(0x6c11478f788b3),ModifyPasswordBoxTemplate=__webpack_require__(0x4568dccaef3b0),ModifyPasswordBoxView=NutstoreBaseView.extend({tagName:"div",className:"control-row",template:_.template(ModifyPasswordBoxTemplate),events:{"blur #new_password":"_validatePassword","focus #new_password":"_clearError"},initialize:function(){this.render();var self=this;this._modalView=new ModalBaseView({idAttr:"modify_passcode_box",title:Constants.MODIFY_PASSWORD,okText:Constants.OK,cancelText:Constants.CANCEL,bodyView:this.$el,confirmAction:function(modalView){modalView.clearErrorTip(),self.confirmAction(modalView)}}),this._modalView.addChildView(this),this.needStrong="strong"===PageInfo.passwordStrength,Modernizr.input.placeholder?this.needStrong&&this.$passwordInput.attr("placeholder",Constants.PASSWORD_STRONG_HINT):(this.needStrong&&this.$passwordInput.attr("title",Constants.PASSWORD_STRONG_HINT),this.$passwordInput.tooltip(),this.$retypeNewPwd.tooltip())},render:function(){return this.$el.html(this.template({})),this.$passwordInput=this.$("#new_password"),this.$passwordRow=this.$("#password-row"),this.$retypeNewPwd=this.$("#retype_new_password"),this},checkStrongPassword:function(){var val=$.trim(this.$passwordInput.val()),right=/^.*[0-9]+.*/.test(val)&&/^.*[a-z]+.*/.test(val)&&/^.*[A-Z]+.*/.test(val)&&val.length>=10;return right||this.$passwordRow.addClass("error"),right},_validatePassword:function(){this.needStrong&&this.checkStrongPassword()},_clearError:function(){this.$passwordRow.removeClass("error")},validateNames:function(modalView){var result=!0;return modalView.clearErrorTip(),$.trim(this.$("#new_password").val())!==$.trim(this.$("#retype_new_password").val())&&(modalView.showErrorTip(Constants.ERROR_RETYPE_PWD_CONFICT),
result=!1),this.$("#old_password,#new_password,#retype_new_password").each(function(e){var value=$.trim($(this).val());(value.length<6||value.length>54)&&(modalView.showErrorTip(Constants.ERROR_PASSWORD_LENGTH),result=!1)}),result},confirmAction:function(modalView){this.needStrong&&!this.checkStrongPassword()||this.requestUpdateUserPassword(modalView)},requestUpdateUserPassword:function(modalView){return modalView.startLoading(),this.validateNames(modalView)?void $.ajax({url:"/d/ajax/modify_password",type:"POST",data:this.$("#modify_pwd_form").serialize(),context:this,success:function(data,textStatus,xhr){200!==xhr.status?modalView.showErrorTip(Constants.FAILED_PLEASE_TRY_AGAIN):(modalView.hideModal(),PubSub.publish("modify-password-success"))},error:function(xhr){401===xhr.status?modalView.showErrorTip(Constants.ERROR_OLDER_PASSWORD_INVALID):modalView.showErrorTip(Constants.FAILED_PLEASE_TRY_AGAIN)},complete:function(){modalView.endLoading()}}):void window.setTimeout(function(){modalView.endLoading()},300)}});return ModifyPasswordBoxView}.call(exports,__webpack_require__,exports,module),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},0x3c7f0ddeba7d5:function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_RESULT__=function(require,exports,module){var $=__webpack_require__(5158837218028295),_=__webpack_require__(7813475321478606),NutstoreBaseView=(__webpack_require__(0x4017662b84c16),__webpack_require__(0xfcd65196d3697)),ModalBaseView=__webpack_require__(0x6c11478f788b3),UnlinkDevicesBoxTemplate=(__webpack_require__(7602224003619457),__webpack_require__(6849031306591421)),UnlinkDeviceBoxView=NutstoreBaseView.extend({tagName:"div",className:"control-row",template:_.template(UnlinkDevicesBoxTemplate),initialize:function(){this.render();var self=this;this._modalView=new ModalBaseView({idAttr:"unlink-devices-box",title:Constants.UNLINK_ALL_DEVICES,okText:Constants.CONFIRM_UNLINK,cancelText:Constants.CANCEL,bodyView:this.$el,confirmAction:function(modalView){self.requestToUnlink(modalView)}}),this._modalView.addChildView(this),this.$(".unlink-panel").hide(),this.$("#unlink-confirm").show(),this.$("#unlink-account").text(this.options.displayname)},render:function(){return this.$el.html(this.template({})),this},requestToUnlink:function(modalView){this.$(".unlink-panel").hide(),this.$("#unlink-indicator").show(),modalView.startLoading(),$.ajax({url:"/d/ajax/resetSessionToken",type:"POST",context:this,success:function(data,textStatus,xhr){this.$(".unlink-panel").hide(),200!==xhr.status?(this.$("#unlink-fail").show(),modalView.hideOkButton(),modalView.setCancelText(Constants.CLOSE)):(modalView.hideCancelButton(),modalView.setOKText(Constants.LOGIN_AGAIN),modalView.toggleOKButtonKeyStatus(!0),modalView.setConfirmAction(function(){window.location.href="/"}),modalView.$el.css({width:"220px","margin-left":"-110px"}),this.$("#unlink-success").show())},error:function(xhr){modalView.hideOkButton(),modalView.setCancelText(Constants.CLOSE),modalView.$el.css({width:"320px","margin-left":"-160px"}),this.$(".unlink-panel").hide(),this.$("#unlink-fail").show()},complete:function(){modalView.endLoading()}})}});return UnlinkDeviceBoxView}.call(exports,__webpack_require__,exports,module),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},8104423438877732:function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_RESULT__=function(require,exports,module){var LoadingIndicator=__webpack_require__(7338194579372937),NutstoreBaseView=__webpack_require__(0xfcd65196d3697),ModalView=__webpack_require__(0x6c11478f788b3),TFAuth=NutstoreBaseView.extend({el:"#tfauth-panel",initialize:function(){this.render(),this._bindeEvents(),this._isFirstTrial=!0,AccountInfo.tfauth_enabled?this._showEnabledInfo():this._showDisabledInfo()},render:function(){return this._infoStatusField=this.$el.find("#tfauth-status-field"),this._infoEnableButton=this._infoStatusField.find(".enable-button"),this._infoDisableButton=this._infoStatusField.find(".disable-button"),this._statusText=this._infoStatusField.find(".status-text"),this._disableInfoField=this.$el.find("#disable_field"),this._enabledInfoField=this.$el.find("#enable_field"),this._disableFillFiled=this.$el.find("#fill_in_form"),this._phoneDisableFiled=this.$el.find("#sms-disable-form"),this._passcodeInput=this.$el.find("#authen_passcode"),this._authButton=this.$el.find("table .auth-close-btn"),this._cancelButton=this.$el.find("table .cancel-btn"),this._passcodeAlertEle=this.$el.find("#passcode-alert"),this._passcodeTimeEle=this.$el.find("#passcode-alert-time"),this._numberRow=this.$el.find(".number-row"),this._numberEle=this.$el.find(".phone-number"),this._unbindLink=this.$el.find("#unbind-number-link"),this._getSMSButton=this.$el.find(".get-sms-btn"),this},_bindeEvents:function(){this._infoDisableButton.click($.proxy(this._disableButtonClicked,this)),this._authButton.click($.proxy(this._authButtonClicked,this)),this._cancelButton.click($.proxy(this._cancelButtonClicked,this)),this._getSMSButton.click($.proxy(this._getSMSButtonClicked,this)),this._unbindLink.click($.proxy(this._unbindLinkClicked,this))},_showEnabledInfo:function(){this._hideAlert(),this._hideDisableForms(),this._infoStatusField.fadeIn(),this._statusText.text(PageInfo.authViaPhone?Constants.TFAUTH_SMS_ENABLED:PageInfo.authViaWechat?Constants.TFAUTH_WECHAT_ENABLED:Constants.TFAUTH_GOOGLE_ENABLED),this._infoEnableButton.hide(),this._infoDisableButton.show(),this._numberEle.text(Constants.PHONE),PageInfo.authViaPhone?this._numberRow.show():this._numberRow.hide()},_showDisableFillForm:function(){this._hideAlert(),this._infoStatusField.hide(),PageInfo.authViaPhone||PageInfo.authViaWechat?(this._phoneDisableFiled.fadeIn(),this._disableFillFiled.hide(),this._setupPhoneDisableForm()):(this._disableFillFiled.fadeIn(),this._phoneDisableFiled.hide(),this._passcodeInput.val("").focus())},_setupPhoneDisableForm:function(){this._isFirstTrial?(this._passcodeInput.hide(),this.$el.find(".first.get-sms-btn").text(Constants.TFAUTH_GET_SMS).show(),this.$el.find(".second-action-row").hide(),this._isFirstTrial=!1):this._passcodeInput.select().focus()},_showDisabledInfo:function(){this._hideAlert(),this._hideDisableForms(),this._infoStatusField.fadeIn(),this._statusText.text(Constants.TFAUTH_DISABLED),this._infoEnableButton.show(),this._infoDisableButton.hide(),this._numberRow.hide()},_hideAlert:function(){this._passcodeAlertEle.hide(),this._passcodeTimeEle.hide()},_hideDisableForms:function(){this._phoneDisableFiled.hide(),this._disableFillFiled.hide()},_requestToDisableTFAuth:function(){LoadingIndicator.start($("#safe"));var self=this;$.ajax({url:"/d/ajax/tfauth/disable",type:"POST",data:{passcode:$.trim(this._passcodeInput.val())},context:this,success:function(data,textStatus,xhr){200!==xhr.status?(self._showAlertMsg(xhr),this._passcodeInput.focus()):(self._serverDateTimer&&(window.clearInterval(self._serverDateTimer),self._serverDateTimer=null),this._showDisabledInfo())},error:function(xhr){self._showAlertMsg(xhr),this._passcodeInput.focus()},complete:function(){LoadingIndicator.finish($("#safe"))}})},_showAlertMsg:function(c){var self=this,d=c.getResponseHeader("Content-Type"),b=null;d.indexOf("json")>-1&&(b=$.parseJSON(c.responseText)),this._passcodeTimeEle.hide().text(""),self._serverDateTimer&&(window.clearInterval(self._serverDateTimer),self._serverDateTimer=null);var msg=Constants.ERROR_MSG_GENERAL;401!==c.status||"TwoFactorAuthFailed"!==b.errorCode||PageInfo.authViaPhone||PageInfo.authViaWechat||b.payload&&(self._localDate=new Date,self._serverDate=new Date,self._serverDate.setTime(b.payload),self._updateServerDate(),msg=Constants.ERROR_MSG_PASSCODE,self._serverDateTimer=window.setInterval(function(){self._updateServerDate()},1e3)),"NeedTwoFactorsAuthentication"===b.errorCode&&PageInfo.authViaWechat&&(msg=Constants.TFAUTH_ERROR_MSG_NEED_SUBSCRIBE),this._passcodeAlertEle.text(msg).show()},_updateServerDate:function(){var self=this,now=new Date,serverNow=new Date,diff=now.getTime()-self._localDate.getTime();serverNow.setTime(self._serverDate.getTime()+diff);var timeStr=serverNow.toLocaleTimeString().replace(/(\s?\S*\d{4})/,""),hint=[Constants.ERROR_MSG_TIME_HINT,timeStr].join(" ");this._passcodeTimeEle.text(hint).show()},_requestToGetTFAuthSMS:function(){LoadingIndicator.start("#safe"),$.ajax({url:"/d/ajax/tfauth/sendSms",type:"POST",data:{is_login:!0},cache:!1,context:this,success:function(res,status,xhr){this._beginCountDownRetry(),this.$el.find(".first.get-sms-btn").hide(),this.$el.find(".second-action-row").show(),this._passcodeInput.show().focus()},error:function(xhr,status,error){this._showAlertMsg(xhr)},complete:function(){LoadingIndicator.finish($("#safe"))}})},_requestToGetTFAuthWechatMsg:function(){LoadingIndicator.start("#safe"),$.ajax({url:"/d/ajax/tfauth/sendSms",type:"POST",data:{is_login:!0},cache:!1,context:this,success:function(res,status,xhr){this._beginCountDownRetry(),this.$el.find(".first.get-sms-btn").hide(),this.$el.find(".second-action-row").show(),this._passcodeInput.show().focus()},error:function(xhr,status,error){this._showAlertMsg(xhr)},complete:function(){LoadingIndicator.finish($("#safe"))}})},_beginCountDownRetry:function(){this._downCountTimer&&window.clearTimeout(this._downCountTimer);var self=this,total_count=60,count=total_count,msgTemplate=Constants.TRY_AGAIN_AFTER_STH_SECONDS,showTimeoutSeconds=function(seconds){var msg=msgTemplate.replace("%d",seconds);self._getSMSButton.text(msg)},timeoutFunc=function(){count--,showTimeoutSeconds(count),0===count?(self._getSMSButton.prop("disabled",!1),self._getSMSButton.text(Constants.TFAUTH_GET_SMS)):this._downCountTimer=window.setTimeout(timeoutFunc,1e3)};self._getSMSButton.prop("disabled",!0),showTimeoutSeconds(count),this._downCountTimer=window.setTimeout(timeoutFunc,1e3)},_disableButtonClicked:function(e){return!PageInfo.isLdapAuthEnabled&&PageInfo.forceEnableTFauth?this._showAskAdminToResetTFauthTip():this._showDisableFillForm(),!1},_authButtonClicked:function(e){return this._requestToDisableTFAuth(),!1},_cancelButtonClicked:function(e){return this._showEnabledInfo(),this._serverDateTimer&&(window.clearInterval(this._serverDateTimer),this._serverDateTimer=null),!1},_unbindLinkClicked:function(e){var self=this,view=new ModalView({title:Constants.UNBOUND_PHONE_NUMBER_TITLE,infoMsg:Constants.UNBOUND_PHONE_NUMBER_TIP,okText:Constants.UNBOND_PHONE_NUMBER,cancelText:Constants.CANCEL,confirmAction:function(modalView){modalView.hideModal(),self._showDisableFillForm()}});return view.toggleOKButtonKeyStatus(!0),!0},_getSMSButtonClicked:function(e){return PageInfo.authViaPhone?this._requestToGetTFAuthSMS():PageInfo.authViaWechat&&this._requestToGetTFAuthWechatMsg(),!1},_showAskAdminToResetTFauthTip:function(){var modalView=new ModalView({title:Constants.TIP,infoMsg:Constants.ASK_ADMIN_TO_RESET_TFAUTH,cancelText:Constants.OK});modalView.hideOkButton()}});return TFAuth}.call(exports,__webpack_require__,exports,module),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},577526939962687:function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_RESULT__=function(require,exports,module){var self,$=__webpack_require__(5158837218028295),Backbone=(__webpack_require__(7813475321478606),__webpack_require__(0x4017662b84c16)),AjaxError=__webpack_require__(0xdcdcc9b7a2300),MessageNotifier=__webpack_require__(7602224003619457),TCaptchaView=Backbone.View.extend({tagName:"div",initialize:function(){self=this,this.render(),this.loadTCaptchaApiUrl(),this.$el.on("click",function(e){return e.preventDefault(),!1}),this.reusable="",this.loadFlag=!1,$("body").append(this.$el),$(this.options.TagName).attr("disabled","true").css("opacity","0.70")},render:function(){this.$el.css({height:"100%",width:"100%",background:"#000",position:"fixed",top:"0",display:"none","z-index":"1200",opacity:"0.6",filter:"alpha(opacity=50)"}),this.loadFlag=!0,this.lang=1033},showMask:function(){this.$el.show()},hideMask:function(){this.$el.hide()},loadTCaptchaApiUrl:function(){var url="/d/ajax/getCaptcha";$.ajax({url:url,method:"get",context:this,success:function(data){if(data.url){var $script=$("<script></script>").attr("src",data.url);$("head").append($script),$script.ready(function(){$(self.options.TagName).attr("disabled",!1).css("opacity","1.0")}),data.custom_ticket?(self.custom_ticket=data.custom_ticket,self.exp=data.exp,self.sig=data.sig,self.reusable=!1):self.loadFlag=!0}else $(self.options.TagName).attr("disabled",!1).css("opacity","1.0"),self.custom_ticket=data.custom_ticket,self.exp=data.exp,self.sig=data.sig,self.reusable=!0;data.is_zh_CN&&(this.lang=2052)},error:function(xhr,status,error){var ajaxError=AjaxError.parse(xhr);"DisabledForPrivateDeployment"===ajaxError.getCode()?(this.error=!0,$(this.options.TagName).attr("disabled",!1).css("opacity","1.0")):MessageNotifier.show(Constants.GENERAL_ERROR_MSG)}})},initTCaptcha:function(cb){function cbfn(retJson){if(0==retJson.ret){self.hideMask();var callback=cb?cb:self.options.callback;callback({ticket:retJson.ticket,reusable:self.reusable})}else self.hideMask()}var self=this;if(this.error){var callback=cb?cb:self.options.callback;callback()}if(this.loadFlag){var capOption={callback:cbfn,showHeader:!0,type:"popup",lang:this.lang};capDestroy(),capInit(self.$el[0],capOption),this.showMask()}else{this.loadFlag=!this.reusable;var callback=cb?cb:self.options.callback;callback({custom_ticket:self.custom_ticket,exp:self.exp,sig:self.sig,reusable:self.reusable})}}});return TCaptchaView}.call(exports,__webpack_require__,exports,module),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},0xdcdcc9b7a2300:function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_RESULT__=function(require,exports,module){function AjaxError(status,json){this._status=status||-1,this._code=json.errorCode||ErrorCode.Custom.NetworkFail,this._detail=json.detailMsg||"",this._payload=json.payload||"",this.json=json||{}}function _parse(jqXHR){var json={};try{json=$.parseJSON(jqXHR.responseText||"{}")}catch(err){json={}}return new AjaxError(jqXHR.status,json)}var $=__webpack_require__(5158837218028295),ErrorCode=__webpack_require__(986999151568157);return AjaxError.prototype.getStatus=function(){return this._status},AjaxError.prototype.getCode=function(){return this._code},AjaxError.prototype.getDetail=function(){return this._detail},AjaxError.prototype.getPayload=function(){return this._payload},{parse:_parse}}.call(exports,__webpack_require__,exports,module),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},0xd77d645503331:function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_RESULT__=function(require,exports,module){function initialize(){var str,key,versionKey,index,dataOS={iPhone:{string:navigator.userAgent,key:"iPhone"},iPad:{string:navigator.userAgent,key:"iPad"},iPod:{string:navigator.userAgent,key:"iPod"},Android:{string:navigator.userAgent,key:"Android"},WP:{string:navigator.userAgent,key:"Windows Phone"},Windows:{string:navigator.platform,key:"Win"},Linux:{string:navigator.platform,key:"Linux"},Mac:{string:navigator.platform,key:"Mac"}},dataBrowser={IEEdge:{string:navigator.userAgent,key:"Edge",versionKey:"Edge"},Wechat:{string:navigator.userAgent,key:"MicroMessenger",versionKey:"MicroMessenger"},QQBrowser:{string:navigator.userAgent,key:"QQBrowser",versionKey:"QQBrowser"},QQ:{string:navigator.userAgent,key:"QQ",versionKey:"QQ"},Chrome:{string:navigator.userAgent,key:"Chrome",versionKey:"Chrome"},Safari:{string:navigator.vendor,key:"Apple",versionKey:"Version"},Firefox:{string:navigator.userAgent,key:"Firefox",versionKey:"Firefox"},IE:{string:navigator.userAgent,key:"MSIE",versionKey:"MSIE"},Mozilla:{string:navigator.userAgent,key:"Gecko",versionKey:"rv"}};for(var os in dataOS)if(str=dataOS[os].string||"",key=dataOS[os].key,str.indexOf(key)>=0){_os=os;break}for(var browser in dataBrowser)if(str=dataBrowser[browser].string||"",key=dataBrowser[browser].key,str.indexOf(key)>=0){_browser=browser,versionKey=dataBrowser[browser].versionKey,index=str.indexOf(versionKey),index>=0&&(index+=versionKey.length+1,_version=parseFloat(str.substring(index)));break}}var _os="unknown OS",_browser="unknown browser",_version="unknown version";return initialize(),{os:_os,browser:_browser,version:_version,isIE:"IE"===_browser,isIE7:"IE"===_browser&&_version>=7&&_version<8,isIE7Plus:"IE"===_browser&&_version>=7,isIE8Plus:"IE"===_browser&&_version>=8,isIE9Plus:"IE"===_browser&&_version>=9,isWindows:"Windows"===_os,isLinux:"Linux"===_os,isMac:"Mac"===_os,isMobile:"Windows"!==_os&&"Linux"!==_os&&"Mac"!==_os,isAndroid:"Android"===_os,isIOS:"iPhone"===_os||"iPad"===_os||"iPod"===_os,isWindowsPhone:"WP"===_os,isWechat:"Wechat"===_browser,isQQBrowser:"QQBrowser"===_browser,isQQ:"QQ"===_browser,isEnterprise:window.PageInfo&&window.PageInfo.IS_ENTERPRISE}}.call(exports,__webpack_require__,exports,module),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},986999151568157:function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_RESULT__=function(require,exports,module){var standardError={IllegalArgument:"IllegalArgument",ObjectNotFound:"ObjectNotFound",TooBigEntity:"TooBigEntity",InternalServiceDisabled:"InternalServiceDisabled"},customError={NetworkFail:"NetworkFail",OfficeTypeError:"OfficeTypeError",TooOldBrowser:"TooOldBrowser",FileTypeError:"FileTypeError",FileSizeError:"FileSizeError"};return{Standard:standardError,Custom:customError}}.call(exports,__webpack_require__,exports,module),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},5398090840435253:function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_RESULT__=function(require,exports,module){var my={},DAY=864e5,HOUR=36e5,MINUTE=6e4,SECOND=1e3,GBInBytes=1073741824,MBInBytes=1048576;return my.stringOfSize=function(bytes){if("number"!=typeof bytes)return bytes;for(var texts=["Bytes","KB","MB","GB","TB","PB","EB"],i=0,digitals=0;bytes>=1024;)bytes/=1024,i++;return digitals=i>0&&bytes<10?1:0,bytes.toFixed(digitals)+" "+texts[i]},my.stringOfTime=function(time,style){var d=new Date(time),o={"M+":d.getMonth()+1,"d+":d.getDate(),"h+":d.getHours(),"m+":d.getMinutes(),"s+":d.getSeconds(),S:d.getMilliseconds()};/(y+)/.test(style)&&(style=style.replace(RegExp.$1,(d.getFullYear()+"").substr(4-RegExp.$1.length)));for(var k in o)new RegExp("("+k+")").test(style)&&(style=style.replace(RegExp.$1,1===RegExp.$1.length?o[k]:("00"+o[k]).substr((""+o[k]).length)));return style},my.percent=function(number){return 100*(number||0)+"%"},my.trimNumberToString=function(number,threshold){return"number"==typeof number?(threshold=threshold||99,number>threshold?threshold+"+":number+""):""+number},my.formatGBToInteger=function(bytes){var gbNumber=bytes/GBInBytes;return gbNumber.toFixed(0)},my.formatBytesToGBFloat=function(bytes){var gbNumber=bytes/GBInBytes;return gbNumber.toFixed(2)},my.formatBytesToGB=function(bytes){var gbNumber=bytes/GBInBytes,floorGB=Math.floor(gbNumber),floorBytes=floorGB*GBInBytes,differBiggerThan1M=bytes-floorBytes>1*MBInBytes;return gbNumber.toFixed(differBiggerThan1M?3:0)},my.formatDate=function(time,style){var d=new Date(time),o={"M+":d.getMonth()+1,"d+":d.getDate(),"h+":d.getHours(),"m+":d.getMinutes(),"s+":d.getSeconds(),"q+":Math.floor((d.getMonth()+3)/3),S:d.getMilliseconds()};/(y+)/.test(style)&&(style=style.replace(RegExp.$1,(d.getFullYear()+"").substr(4-RegExp.$1.length)));for(var k in o)new RegExp("("+k+")").test(style)&&(style=style.replace(RegExp.$1,1===RegExp.$1.length?o[k]:("00"+o[k]).substr((""+o[k]).length)));return style},my.formatDay=function(time){return Math.ceil(time/DAY)},my.formatMicros=function(micros){if("number"!=typeof micros)return micros;for(var texts=["s","ms","s"],i=0,digitals=2;micros>=1e3&&i<texts.length-1;)micros/=1e3,i++;return digitals=i>0&&micros<10?2:0,micros.toFixed(digitals)+" "+texts[i]},my.formateTimeAgo=function(time){var now=new Date,diff=now.getTime()-Number(time);return diff<SECOND?{type:0,number:diff}:diff<MINUTE?{type:1,number:Math.floor(diff/SECOND)}:diff<HOUR?{type:2,number:Math.floor(diff/MINUTE)}:diff<DAY?{type:3,number:Math.floor(diff/HOUR)}:{type:4,number:this.stringOfTime(Number(time),"yyyy/MM/dd")}},my}.call(exports,__webpack_require__,exports,module),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},0xcb8a23df3c54a:function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_RESULT__=function(require){function globalTimeoutFunc(){global_count--,timer_callbacks.showTimeoutSeconds&&timer_callbacks.showTimeoutSeconds(global_count),0===global_count&&timer_callbacks.finishCallback?(timer_callbacks.finishCallback(),window.downCountTimer=null):window.downCountTimer=window.setTimeout(globalTimeoutFunc,1e3)}var global_count=0,timer_callbacks={},view={finished:function(){return 0===global_count},setCallBacks:function(callBacks){timer_callbacks=callBacks},beginCount:function(seconds){return!window.downCountTimer&&(global_count=seconds,timer_callbacks.showTimeoutSeconds&&timer_callbacks.showTimeoutSeconds(global_count),window.downCountTimer=window.setTimeout(globalTimeoutFunc,1e3),!0)}};return view}.call(exports,__webpack_require__,exports,module),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},7338194579372937:function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_RESULT__=function(require,exports,module){function _createOverlayElement(){var str="";return str=_supportAnimation()?'<div class="center loading-indicator-overlay">  <div class="cssload-loader">    <div class="cssload-inner cssload-one"></div>    <div class="cssload-inner cssload-two"></div>    <div class="cssload-inner cssload-three"></div>    <div class="cssload-inner cssload-center"></div>  </div></div>':'<div class="center loading-indicator-overlay">  <img src="/static/icons/gif/ajax-loader.gif" class="overlay-image" alt="Loading"></div>',$(str)}function _supportAnimation(){var animation=!1,animationstring="animation",keyframeprefix="",domPrefixes="Webkit Moz O ms Khtml".split(" "),pfx="",elm=document.createElement("div");if(void 0!==elm.style.animationName&&(animation=!0),animation===!1)for(var i=0;i<domPrefixes.length;i++)if(void 0!==elm.style[domPrefixes[i]+"AnimationName"]){pfx=domPrefixes[i],animationstring=pfx+"Animation",keyframeprefix="-"+pfx.toLowerCase()+"-",animation=!0;break}return animation}var my={};return my.start=function(target,minHeight){var height,$target=$(target),$overlay=$(target).children(".loading-indicator-overlay"),style={};if($overlay.length>0){var first=$overlay.get(0),refcount=$(first).data("refcount");return void $(first).data("refcount",refcount+1)}$overlay=_createOverlayElement(),$overlay.data("refcount",1),$target.data("overlay-origin-style",$target.css("overflow")),$target.get(0)===document.body?$overlay.css({position:"fixed",top:0,right:0,bottom:0,left:0}):"static"===$target.css("position")&&$target.css({position:"relative",overflow:"hidden",zoom:"1"}),style.width="100%",style.height="100%","number"==typeof minHeight&&(style.minHeight=minHeight),height=$target.height(),$overlay.css(style),$("img",$overlay).css({position:"relative",top:"135px"}),$overlay.appendTo($target).show().css("opacity",.6)},my.setText=function(target,text){var $target=$(target),$overlay=$target.children(".loading-indicator-overlay"),$textel=$overlay.find(".text");text?($textel.length<=0&&($textel=$('<div class="text" style="position:relative; top:150px; left:4px; font-weight:bold; font-size: 13px;"></div>'),$textel.appendTo($overlay)),$textel.text(text)):$textel.text("")},my.finish=function(target){var $target=$(target),$overlay=$target.children(".loading-indicator-overlay");if($overlay.length>0){var first=$overlay.get(0),refcount=$(first).data("refcount");if(refcount<=1){if($overlay.remove(),$target.get(0)!==document.body){var originStyle=$target.data("overlay-origin-style");$target.css("overflow",originStyle||"auto"),$target.data("overlay-origin-style","")}}else $(first).data("refcount",refcount-1)}},my}.call(exports,__webpack_require__,exports,module),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},7602224003619457:function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_RESULT__=function(require,exports,module){function setupMessageElement(){var builder=null;msgRoot||(builder=new StringBuilder,PageInfo&&PageInfo.isMobile?(builder.add('<div class="clear center msg-notifier-root mobile">'),builder.add('  <div  class="msg-notifier-block">'),builder.add('    <span class="msg-notifier-text">&nbsp;</span>'),builder.add("  </div>"),builder.add("</div>"),msgRoot=$(builder.build()),msgText=$(".msg-notifier-text",msgRoot),msgRoot.appendTo($("body"))):(builder.add('<div class="clear center msg-notifier-root">'),builder.add('  <div  class="msg-notifier-block">'),builder.add('    <span class="msg-notifier-text">&nbsp;</span>'),builder.add('    <span class="msg-notifier-closer">X</span>'),builder.add("  </div>"),builder.add("</div>"),msgRoot=$(builder.build()),msgText=$(".msg-notifier-text",msgRoot),msgRoot.appendTo($("body")),msgRoot.find(".msg-notifier-closer").bind("click",function(){msgRoot.hide()})))}function timeoutFunc(){$(msgRoot).stop(!0,!0).fadeOut(200),timer=null}var $=__webpack_require__(5158837218028295),StringBuilder=__webpack_require__(285606157690737),my={},msgRoot=null,msgText=null,timer=null,PageInfo=window.PageInfo,getRootElement=function(){var $root=$("<div>").addClass("clear center msg-notifier-root relative"),$block=$("<div>").addClass("msg-notifier-block"),$text=$("<span>").addClass("msg-notifier-text").text(" ");return $root.append($block.append($text))};return my.show=function(htmlStr,isSuccess,dontDismiss){if(timer&&window.clearTimeout(timer),setupMessageElement(isSuccess),$(msgText).empty().html(htmlStr),isSuccess?$(msgRoot).find(".msg-notifier-block").attr("class","msg-notifier-block success-notify"):$(msgRoot).find(".msg-notifier-block").attr("class","msg-notifier-block"),$(msgRoot).stop(!0,!0).fadeOut(100).fadeIn(100),PageInfo&&PageInfo.isMobile)timer=window.setTimeout(timeoutFunc,3e3);else{if(dontDismiss)return;var outTime=my.outTimeOnce||15;timer=window.setTimeout(timeoutFunc,1e3*outTime),my.outTimeOnce&&(my.outTimeOnce=null)}},my.showOnTarget=function(target,htmlStr,isSussess,position){if(target){position=position||"top";var $target=$(target),$ele=$target.data("msg-notifier-ele");$ele&&($ele.stop(!0,!0).remove(),$target.data("msg-notifier-ele",void 0)),$ele=getRootElement().addClass(position),$ele.find(".msg-notifier-text").empty().html(htmlStr),$ele.find("msg-notifier-block").toggleClass("success-notify",isSussess),$target.data("msg-notifier-ele",$ele),$target.append($ele),$ele.fadeIn(100),$ele.animate({abc:""},2e3,function(){$ele.fadeOut(100,function(){$ele.remove(),$target.data("msg-notifier-ele",void 0)})})}},my}.call(exports,__webpack_require__,exports,module),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},0x6c11478f788b3:function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_RESULT__=function(require,exports,module){var _modalView,$=__webpack_require__(5158837218028295),_=__webpack_require__(7813475321478606),LoadingIndicator=(__webpack_require__(0x4017662b84c16),__webpack_require__(7338194579372937)),NutstoreBaseView=__webpack_require__(0xfcd65196d3697),PubSub=__webpack_require__(0x46ff2984bc319),ModalBaseViewTemplate=__webpack_require__(8054714378749567);$(document.body).on("keyup.modal",function(e){27!==e.keyCode&&27!==e.which||_modalView&&!_modalView.isDisabled()&&_modalView.hideModal(!0)});var ModalBaseView=NutstoreBaseView.extend({className:"modal nts-modal",events:{"click .dismiss":"_dismissModal","click .cancel-button":"_cancelAction","click .ok-button":"_confirmAction","click .control-tab":"_switchTab","click .error-tip":"hideErrorTip",keyup:"_preventKeyUpEvent"},template:_.template(ModalBaseViewTemplate),initialize:function(){this.idAttr=this.options.idAttr||"a-modal",this.title=this.options.title||"",this.okText=this.options.okText||Constants.OK,this.cancelText=this.options.cancelText||Constants.CANCEL,this._disabled=!1,this._isInChain=this.options.isInChain,this._onRemove=this.options.onRemove,this.render(),this.show(),PubSub.publish("modal-displayed",[this])},render:function(){this.$el.html(this.template({})),this.hideFooter(!1);var PageInfo=window.PageInfo;return this.$el.attr("id",this.idAttr),PageInfo&&PageInfo.isMobile&&(this.$el.attr("class","modal-mobile nts-modal-mobile"),this.toggleDismissButton(!1)),this.$(".modal-head .title").text(this.title),this.$(".modal-footer .ok-button").text(this.okText),this.$(".modal-footer .cancel-button").text(this.cancelText),this.options.bodyView?this.$(".modal-body .normal-container").append(this.options.bodyView).show():this.options.infoMsg?this.$(".modal-body .info-container").html(this.options.infoMsg).show():this.options.dangerMsg&&this.$(".modal-body .danger-container").html(this.options.dangerMsg).show(),this._backgroundView=$('<div><div class="inner-background"></div></div>').addClass("modal-background"),this},startLoading:function(){this._disabled=!0,LoadingIndicator.start(this.$el),this.clearErrorTip()},endLoading:function(){this._disabled=!1,LoadingIndicator.finish(this.$el)},isDisabled:function(){return this._disabled},_cancelAction:function(e){this._disabled||_.isFunction(this.options.cancelAction)&&!this.options.cancelAction(this)||this._removeModal(!0)},_dismissModal:function(e){this._disabled||_.isFunction(this.options.dismissAction)&&!this.options.dismissAction(this)||this._removeModal(!0)},_removeModal:function(animated){var self=this;this._isInChain?this.backToPrev():animated?(this._backgroundView.fadeOut(150),this.$el.fadeOut(150,function(){self.remove()})):self.remove(),this._onRemove&&this._onRemove()},_confirmAction:function(e){this._disabled||_.isFunction(this.options.confirmAction)&&this.options.confirmAction(this)},setInfoMessage:function(infoMsg){this.$(".modal-body .info-container").html(infoMsg).show()},wrapOKButton:function(html){var $a=$(html);this.$(".modal-footer .ok-button").wrap($a)},unwrapOKButton:function(){this.$(".modal-footer .ok-button").unwrap()},setModalTitle:function(text){this.title=text,this.$(".modal-head .title").text(text)},setCancelText:function(text){this.$(".modal-footer .cancel-button").text(text)},setOKText:function(text){this.$(".modal-footer .ok-button").text(text)},hideModal:function(animated){this._removeModal(animated)},hideOkButton:function(){this.$(".modal-footer .ok-button").hide()},showOkButton:function(){this.$(".modal-footer .ok-button").show()},hideCancelButton:function(){this.$(".modal-footer .cancel-button").hide()},showCancelButton:function(){this.$(".modal-footer .cancel-button").show()},toggleDismissButton:function(toShown){this.$(".modal-head .dismiss").toggle(toShown)},disableModal:function(){this._disabled=!0},enabledModal:function(){this._disabled=!1},show:function(animated){_modalView=this,this._backgroundView.parent().length<1&&$(document.body).append(this._backgroundView),animated===!1?this._backgroundView.show():this._backgroundView.fadeIn(100),this.$el.parent().length<1&&this.$el.appendTo(document.body),this._adjustHeight(),this.$el.show()},remove:function(){this._backgroundView.remove(),this._isInChain?_modalView=this.options.prevModalView:(_modalView=void 0,PubSub.publish("modal-removed")),
NutstoreBaseView.prototype.remove.call(this)},backToPrev:function(){if(this.options.prevModalView){var prevModalView=this.options.prevModalView;prevModalView.show(!1)}this.remove()},hideForOthers:function(){this._backgroundView.hide(),this.$el.hide()},hide:function(){this.hideForOthers()},showErrorTip:function(tip,success){this._timer&&window.clearTimeout(this._timer);var self=this,$ele=this.$(".error-tip .tip");this.$(".error-tip").show(),$ele.text(tip).stop(!0,!0).fadeOut(100).fadeIn(100,function(){self._timer=window.setTimeout(function(){$ele.fadeOut(300,function(){self.$(".error-tip").hide()}),self._timer=null},1e4)}),$ele.toggleClass("success",success===!0)},clearErrorTip:function(){this.$(".error-tip .tip").stop(!0,!0).hide()},toggleOKButtonKeyStatus:function(key){this.$(".modal-footer .ok-button").toggleClass("key",key)},toggleCancelButtonKeyStatus:function(key){this.$(".modal-footer .cancel-button").toggleClass("key",key)},_switchTab:function(e){var $target=$(e.currentTarget),selector=$target.attr("data-content-id");this.$(".control-tab").removeClass("active"),this.$(".tab-content").hide(),$target.addClass("active"),this.$(selector).show(),_.isFunction(this.options.tabSwitch)&&this.options.tabSwitch($target,this)},enableOkButton:function(){this._disabledButton(this.$(".modal-footer .ok-button"),!1)},disableOkButton:function(){this._disabledButton(this.$(".modal-footer .ok-button"),!0)},_disabledButton:function($button,disabled){$button.prop("disabled",disabled)},hideFooter:function(hide){this.$(".modal-footer").toggle(!hide)},setConfirmAction:function(confirmAction){this.options.confirmAction=confirmAction},hideErrorTip:function(){this.clearErrorTip(),this.$(".error-tip").hide()},_preventKeyUpEvent:function(e){return!1},_adjustHeight:function(){var bodyMaxHeight=.9*window.innerHeight-137;this.$(".modal-body").css({"max-height":bodyMaxHeight+"px"})}});return ModalBaseView}.call(exports,__webpack_require__,exports,module),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},8054714378749567:function(module,exports){module.exports='<div class="modal-head">\n  <div class="title"></div>\n  <div class="dismiss"><span class="hsprite hsprite-close"></span></div>\n</div>\n<div class="modal-body">\n    <div class="normal-container"></div>\n    <div class="info-container"></div>\n    <div class="danger-container danger"></div>\n</div>\n<div class="error-tip"><span class="tip"></span></div>\n<div class="modal-footer">\n    <div class="control-row">\n        <button type="button" class="button ok-button large"></button>\n        <button type="button" class="button large cancel-button"></button>\n    </div>\n</div>'},0xfcd65196d3697:function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_RESULT__=function(require,exports,module){var $=__webpack_require__(5158837218028295),Backbone=__webpack_require__(0x4017662b84c16),_=__webpack_require__(7813475321478606),PubSub=__webpack_require__(0x46ff2984bc319),NutstoreBaseView=Backbone.View.extend({addChildView:function(view){view&&(this._childrenViews||(this._childrenViews=[]),this._childrenViews.push(view))},removeChildViews:function(){this._childrenViews&&(_.each(this._childrenViews,function(view){view.remove()}),this._childrenViews=[])},removeChildView:function(view){if(view&&this._childrenViews){view.remove();var index=_.indexOf(this._childrenViews,view);index>-1&&this._childrenViews.splice(index,1)}},remove:function(){this.removeChildViews(),this.removeSubs(),Backbone.View.prototype.remove.call(this)},addSub:function(sub){sub&&(this._subs||(this._subs=[]),this._subs.push(sub))},removeSubs:function(){_.each(this._subs,function(sub){PubSub.unsubscribe(sub,!1)})},disableElement:function(ele,toDisable){var $ele=$(ele);if(toDisable===!1)$ele.data("action-disable",!1).removeClass("disabled"),$ele.find("div.disabled-overlay").remove();else if($ele.data("action-disable",!0).addClass("disabled"),0===$ele.find("div.disabled-overlay").length){var $overlay=$("<div>").addClass("disabled-overlay");$overlay.css({position:"absolute",top:0,bottom:0,right:0,left:0,"background-color":"#fff",opacity:.7,filter:"alpha(opacity=70)"}),$overlay.click(function(){return!1}),$ele.append($overlay)}},wrapInnerLink:function(ele,link){var $ele=$(ele),$a=$ele.find("a.wrapLink");link&&link.length>0?($a.length<=0&&($a=$("<a>").html("&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"),$a.css({position:"absolute",top:0,bottom:0,right:0,left:0,overflow:"hidden",color:"transparent","font-size":"5em","background-color":"transparent"}),$ele.append($a)),$a.attr("href",link)):$a.length>0&&$a.remove()},isElementDisabled:function(ele){var $ele=$(ele);return $ele.data("action-disable")},verticalAlignEle:function(ele){var $ele=$(ele),scrollTop=$ele.offset().top-($(window).height()-$ele.outerHeight(!0))/2;$("html, body").animate({scrollTop:scrollTop},200)}});return NutstoreBaseView}.call(exports,__webpack_require__,exports,module),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},6134586780286950:function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_RESULT__=function(require,exports,module){var my={};return my.join=function(parent,child){if(!parent||""===parent)return child;var lastChar=parent.charAt(parent.length-1);return"/"===lastChar?parent+child:parent+"/"+child},my.isroot=function(path){return"/"===path},my.isabsolute=function(path){return"string"==typeof path&&"/"===path.charAt(0)},my.components=function(path){var result=[];return"/"===path.charAt(0)&&(result.push("/"),path=path.substring(1)),path.length>0&&result.push.apply(result,path.split("/")),result},my.nameComponents=function(path){var result=[];return"/"===path.charAt(0)&&(path=path.substring(1)),path.length>0&&result.push.apply(result,path.split("/")),result},my.subpaths=function(path){var components=my.components(path);if(components.length<=0)return[];var result=[];result.push(components[0]);for(var i=1;i<components.length;i++)result.push(my.join(result[i-1],components[i]));return result},my.basename=function(path){var index=path.lastIndexOf("/");return index!==-1&&index+1<path.length?path.substring(index+1):path||""},my.isParentPath=function(path,candidateParent){if(!path||!candidateParent||0===candidateParent.length)return!1;if(candidateParent.length>path.length)return!1;var isLastASlash="/"===candidateParent.charAt(candidateParent.length-1),match=isLastASlash?candidateParent:candidateParent+"/";return 0===path.indexOf(match)},my.basedir=function(path){path=path||"";var index=path.lastIndexOf("/");return 0===index?"/":index!==-1&&index+1<path.length?path.substr(0,index):path||""},my.suffix=function(path){path=path||"";var lastIndex=path.lastIndexOf("."),suffix=lastIndex>-1?path.substr(lastIndex+1):"";return suffix.toLowerCase()},my}.call(exports,__webpack_require__,exports,module),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},0x5da0d3b428ba9:function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_RESULT__=function(require,exports,modula){var patternUtils={emailPattern:/^[A-Z0-9a-z._%+-]+@([A-Za-z0-9-]+\.)+[A-Za-z]{2,}$/,numberPattern:/^\d+$/,cellPhonePattern:/^((13[0-9])|(14[0-9])|(15[0-9])|(17[0-9])|(18[0-9]))\d{8}$/,internationalPhonePattern:/^\+[0-9]{9,18}$/,numberAndLetterPattern:/^[a-zA-Z0-9]+$/,namePattern:/^([a-zA-Z0-9]|[\u4E00-\u9FA5\uF900-\uFA2D]){1,}$/};return patternUtils}.call(exports,__webpack_require__,exports,module),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},0x46ff2984bc319:function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_RESULT__=function(require,exports,module){var Events=function(){var cache={},publish=function(topic,args,scope){if(cache[topic]){var thisTopic=cache[topic],i=thisTopic.length-1;for(i;i>=0;i-=1)thisTopic[i].apply(scope||this,args||[])}},subscribe=function(topic,callback){return cache[topic]||(cache[topic]=[]),cache[topic].push(callback),[topic,callback]},unsubscribe=function(handle,completly){var t=handle[0],i=cache[t].length-1;if(cache[t])for(i;i>=0;i-=1)cache[t][i]===handle[1]&&(cache[t].splice(i,1),completly&&delete cache[t])};return{publish:publish,subscribe:subscribe,unsubscribe:unsubscribe}}();return Events}.call(exports,__webpack_require__,exports,module),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},285606157690737:function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_RESULT__=function(require,exports,module){function StringBuilder(){this.content_=[],this.length_=0}return StringBuilder.prototype.add=function(string){return this.content_[this.length_++]=string,this},StringBuilder.prototype.build=function(){var result=this.content_.join("");return this.reset(),result},StringBuilder.prototype.reset=function(){return this.content_=[],this.length_=0,this},StringBuilder}.call(exports,__webpack_require__,exports,module),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},0xa11a71a4a3102:function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_RESULT__=function(require,exports,module){var $=__webpack_require__(5158837218028295),_=__webpack_require__(7813475321478606),Path=__webpack_require__(6134586780286950),my={};return my.stringify=function(obj){if("JSON"in window)return window.JSON.stringify(obj);var t=typeof obj;if("object"!==t||null===obj)return"string"===t&&(obj='"'+obj+'"'),String(obj);var n,v,json=[],arr=obj&&obj.constructor===Array;for(n in obj)v=obj[n],t=typeof v,obj.hasOwnProperty(n)&&("string"===t?v='"'+v+'"':"object"===t&&null!==v&&(v=jQuery.stringify(v)),json.push((arr?"":'"'+n+'":')+String(v)));return(arr?"[":"{")+String(json)+(arr?"]":"}")},my.trim=function(input,maxlen,type){input=input||"";var dots="...",dotsLength=dots.length;maxlen<dotsLength&&(maxlen=dotsLength);var result;if(input.length<=maxlen)result=input;else if("beginning"===type)result=dots+input.substr(input.length-maxlen+dotsLength);else if("middle"===type){var showLength=maxlen-dotsLength,index0=0,length0=Math.floor(showLength/2),length1=showLength-length0,index1=input.length-length1;result=input.substr(index0,length0)+dots+input.substr(index1,length1)}else result=input.substr(0,maxlen-dotsLength)+dots;return result},my.canBePreview=function(relPath,isEnterprise){var previewSuffix=["pdf","doc","docx","dot","dotx","dotm","xls","xlsx","xlsm","xlm","xlsb","ppt","pptx","pptm","pps","ppsx","ppsm","pot","potx","potm","txt"],privateSuffix=["pdf","doc","docx","dot","dotx","dotm","xls","xlsx","xlsm","xlm","xlsb","ppt","pptx","pptm","pps","ppsx","ppsm","pot","potx","potm","odt","ott","oth","odm","rtf","txt","wps","uot","odp","odg","otp","uop","ods","ots","uos"];return _.contains(isEnterprise?privateSuffix:previewSuffix,Path.suffix(relPath))},my.htmlEncode=function(value){return $("<div>").text(value).html()},my.htmlDecode=function(value){return $("<div>").html(value).text()},my.encodeURIPath=function(value){for(var components=value.split("/"),i=0;i<components.length;i++)components[i]=encodeURIComponent(components[i]);return components.join("/")},my.nickNameFromEmail=function(email){email=email||"";var nickName,indexOfAt=email.indexOf("@");return nickName=indexOfAt>-1?email.substr(0,indexOfAt):email},my.isTextFile=function(filename){return"txt"===(Path.suffix(filename)||"").toLowerCase()},my.getCookieByName=function(cname){for(var name=cname+"=",cookies=document.cookie.split(";"),i=0;i<cookies.length;i++){var cookie=$.trim(cookies[i]);if(0===cookie.indexOf(name))return cookie.substr(name.length,cookie.length-name.length)}return""},my.setCookie=function(key,value,dateString,path){if("string"==typeof key&&key){value=value||"";var date=new Date;value?dateString||(date=new Date(date.getTime()+31536e6),dateString=date.toGMTString()):(date=new Date("1970-01-01"),dateString=date.toGMTString()),path=path||"/";var expires="expires="+dateString;document.cookie=key+"="+value+"; "+expires+"; path="+path}},my.getUrlParam=function(name){return decodeURIComponent((new RegExp("[?|&]"+name+"=([^&;]+?)(&|#|;|$)").exec(window.location.search)||["",""])[1].replace(/\+/g,"%20"))||null},my.getUrlParamAll=function(){for(var regex=/[?|&]([0-9a-zA-Z_-]{1,})\=([^&;]{0,})/g,url=decodeURIComponent(window.location.search),paramDict={};;){var param=regex.exec(url);if(null===param)break;paramDict[param[1]]=param[2]}return paramDict},my.isMediaFile=function(filename){var previewSuffix=["mp4"];return _.contains(previewSuffix,Path.suffix(filename))},my.contentTypeFromName=function(name){var dict={mp4:"video/mp4",ogg:"video/ogg",webm:"video/webm"},suffix=Path.suffix(name);return dict[suffix]||dict.mp4},my.without=function(sourceArray,toDeleteArray){var arr=sourceArray;return _.each(toDeleteArray,function(toDeleteItem){arr=_.without(arr,toDeleteItem)}),arr},my.setSelectionRange=function(node,selectionStart,selectionEnd){for(;node.lastChild;)node=node.lastChild;var range=document.createRange(),sel=window.getSelection();range.setStart(node,selectionStart),range.setEnd(node,selectionEnd),sel.removeAllRanges(),sel.addRange(range)},my.setCaretToPos=function(node,pos){this.setSelectionRange(node,pos,pos)},my.supportWatermark=function(name){var watermarkSuffix=["doc","docx","xls","xlsx","ppt","pptx","pdf"];return _.contains(watermarkSuffix,Path.suffix(name))},my.alphanumSort=function(a,b){function chunkify(t){for(var i,j,tz=[],x=0,y=-1,n=0;i=(j=t.charAt(x++)).charCodeAt(0);){var m=46===i||i>=48&&i<=57;m!==n&&(tz[++y]="",n=m),tz[y]+=j}return tz}for(var aa=chunkify(a),bb=chunkify(b),x=0;aa[x]&&bb[x];x++)if(aa[x]!==bb[x]){var c=Number(aa[x]),d=Number(bb[x]);return c==aa[x]&&d==bb[x]?c-d:aa[x]>bb[x]?1:-1}return aa.length-bb.length},my}.call(exports,__webpack_require__,exports,module),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},290811116529171:function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_RESULT__=function(require,exports,module){var $=__webpack_require__(5158837218028295),_=__webpack_require__(7813475321478606),Backbone=__webpack_require__(0x4017662b84c16),Client=__webpack_require__(0xd77d645503331),GlobalTimer=__webpack_require__(0xcb8a23df3c54a),AjaxError=__webpack_require__(0xdcdcc9b7a2300),MessageNotifier=__webpack_require__(7602224003619457),PatternUtils=__webpack_require__(0x5da0d3b428ba9),UserInfoManager=__webpack_require__(0x6bc32e380f8b3),PubSub=__webpack_require__(0x46ff2984bc319),TCaptchaView=__webpack_require__(577526939962687),verifyPhoneViewTemplate=__webpack_require__(991602918017629),verifyPhoneView=Backbone.View.extend({template:_.template(verifyPhoneViewTemplate),events:{"click .close":"_close","click #verify-code-button":"_checkPhone","click #sumbutton":"_confimToVerify","focus #phone":"_removeErrorMsg","focus #verify-code":"_removeErrorMsg"},initialize:function(){var self=this,msgTemplate=Constants.TRY_AGAIN_AFTER_STH_SECONDS;this.isMobile(),this.render(),GlobalTimer.setCallBacks({showTimeoutSeconds:function(seconds){var msg=msgTemplate.replace("%d",seconds);self._getSMSButton.text(msg),self._getSMSButton.attr("disabled",!0).addClass("opac")},finishCallback:function(){self._getSMSButton.text(Constants.TFAUTH_GET_SMS),self._getSMSButton.attr("disabled",!1).removeClass("opac")}}),$("body").append(this.$el),this.TCView=new TCaptchaView({TagName:self.$el.find("#verify-code-button"),callback:function(options){self._requestGetPasscode(options)}}),this.showMsg(),this.showMask()},render:function(){this.$el.html(this.template()),this._getSMSButton=this.$el.find("#verify-code-button"),this.errorMsg=this.$el.find(".verify-code-row .errorMsg"),this.$sumbit=this.$el.find("#sumbutton"),this.$sumbit.attr("disabled",!0)},isMobile:function(){Client.isMobile?(this.$el.addClass("isMobilePage"),this.hideMask()):this.$el.addClass("isPcPage")},_close:function(){this.remove(),this.TCView.remove(),this.hideMask()},_checkPhone:function(){var phone=this.$el.find("#phone").val(),countryCode=this.$el.find("#country_code").val();return"+86"!==countryCode&&phone.startsWith("+")?phone="+"+phone.replace(/\D/g,""):"+86"!==countryCode&&(phone=countryCode+phone.replace(/\D/g,"")),"+86"===countryCode||PatternUtils.internationalPhonePattern.test(phone)?"+86"!==countryCode||PatternUtils.cellPhonePattern.test(phone)?(this.phone=phone,this.TCView.initTCaptcha(),void(Client.isMobile||this.TCView.hideMask())):(this.errorMsg.text(Constants.INVALID_CELL_PHONE_NUMBER),!1):(this.errorMsg.text(Constants.INVALID_CONTACT_PHONE_NUMBER_FOREIGN),!1)},_requestGetPasscode:function(options){var phone=this.phone,data={phone:phone};options.ticket?data.ticket=options.ticket:options.custom_ticket&&(data.custom_ticket=options.custom_ticket,data.exp=options.exp,data.sig=options.sig),data.reusable=options.reusable,GlobalTimer.beginCount(60),$.ajax({url:"/d/ajax/userop/sendVerifyPhoneMsg",method:"POST",data:data,context:this,success:function(data,status,xhr){this.errorMsg.text(Constants.TFAUTH_SEND_SMS_SUCCEED,!0),this.$sumbit.attr("disabled",!1).removeClass("opac")},error:function(xhr,status,error){var msg=Constants.GENERAL_ERROR_MSG,errorObject=AjaxError.parse(xhr),errorCode=errorObject.getCode();"BlockedTemporarily"===errorCode?msg=Constants.ERROR_SMS_REQUEST_TOO_FREQUENTLY:"ENUM_PHONE_INVALID"===errorCode&&(msg=Constants.INVALID_CONTACT_PHONE_NUMBER_FOREIGN),this.errorMsg.text(msg)}})},_confimToVerify:function(){var code=this.$el.find("#verify-code").val();return""==code?(this.errorMsg.text(Constants.ERROR_TWOFACTOR_PASSCODE_EMPTY),!1):void this._verifyPhoneNumber(this.phone,code)},_verifyPhoneNumber:function(phone,code){$.ajax({url:"/d/ajax/userop/verifyPhone",method:"POST",dataType:"json",data:{phone:phone,code:code},context:this,success:function(data,status,xhr){this._close(),MessageNotifier.show(Constants.VERIFY_PHONE_SUCCESS,!0),UserInfoManager.info().set("phoneVerified",!0),this.options.action&&PubSub.publish(this.options.action,this.options.params),this.options.callback&&this.options.callback()},error:function(xhr,status,error){var msg=Constants.VERIFY_PHONE_FAILED,errorObject=AjaxError.parse(xhr),errorCode=errorObject.getCode();"ENUM_PHONE_INVALID"===errorCode&&(msg=Constants.INVALID_CONTACT_PHONE_NUMBER_FOREIGN),this.errorMsg.text(msg)}})},_removeErrorMsg:function(){this.errorMsg.text("")},showMask:function(){this.$mask=document.createElement("div"),this.$mask.className="verifyMask",$("body").append(this.$mask)},hideMask:function(){$(this.$mask).remove()},showMsg:function(){if(!PageInfo)var PageInfo={};Client.isMobile&&(PageInfo.isMobile=!1,MessageNotifier.show(Constants.VERIFY_PHONE_TIP_2,!0),PageInfo.isMobile=Client.isMobile)}});return verifyPhoneView}.call(exports,__webpack_require__,exports,module),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},991602918017629:function(module,exports){module.exports='<div class="verify-phone-box">\n    <div class="verify_logo">\n        <img src="/static/images/sms@2x.png" alt="">\n    </div>\n    <p class="model-title"><%= Constants.TF_AUTH %></p>\n    <div class="input-group phone-row">\n            <select id="country_code" class="country-code">\n                <option value="+93">Afghanistan</option>\n                <option value="+355">Albania</option>\n                <option value="+213">Algeria</option>\n                <option value="+1684">American Samoa</option>\n                <option value="+376">Andorra</option>\n                <option value="+244">Angola</option>\n                <option value="+1264">Anguilla</option>\n                <option value="+1268">Antigua and Barbuda</option>\n                <option value="+54">Argentina</option>\n                <option value="+374">Armenia</option>\n                <option value="+297">Aruba</option>\n                <option value="+247">Ascension Island</option>\n                <option value="+61">Australia</option>\n                <option value="+43">Austria</option>\n                <option value="+994">Azerbaijan</option>\n                <option value="+1242">Bahamas</option>\n                <option value="+973">Bahrain</option>\n                <option value="+880">Bangladesh</option>\n                <option value="+1246">Barbados</option>\n                <option value="+375">Belarus</option>\n                <option value="+32">Belgium</option>\n                <option value="+501">Belize</option>\n                <option value="+229">Benin</option>\n                <option value="+1441">Bermuda</option>\n                <option value="+975">Bhutan</option>\n                <option value="+591">Bolivia</option>\n                <option value="+599">Bonaire, Sint Eustatius, and Saba</option>\n                <option value="+387">Bosnia and Herzegovina</option>\n                <option value="+267">Botswana</option>\n                <option value="+55">Brazil</option>\n                <option value="+673">Brunei</option>\n                <option value="+359">Bulgaria</option>\n                <option value="+226">Burkina Faso</option>\n                <option value="+257">Burundi</option>\n                <option value="+855">Cambodia</option>\n                <option value="+237">Cameroon</option>\n                <option value="+1">Canada</option>\n                <option value="+238">Cape Verde</option>\n                <option value="+1345">Cayman Islands</option>\n                <option value="+236">Central African Republic</option>\n                <option value="+235">Chad</option>\n                <option value="+56">Chile</option>\n                <option value="+86" selected><%= Constants.CHINA %></option>\n                <option value="+57">Colombia</option>\n                <option value="+269">Comoros and Mayotte</option>\n                <option value="+242">Congo</option>\n                <option value="+243">Congo Dem Rep</option>\n                <option value="+682">Cook Islands</option>\n                <option value="+506">Costa Rica</option>\n                <option value="+225">Cote d\'Ivoire</option>\n                <option value="+385">Croatia</option>\n                <option value="+53">Cuba</option>\n                <option value="+599">Curaao</option>\n                <option value="+357">Cyprus</option>\n                <option value="+420">Czech Republic</option>\n                <option value="+45">Denmark</option>\n                <option value="+246">Diego Garcia</option>\n                <option value="+253">Djibouti</option>\n                <option value="+1767">Dominica</option>\n                <option value="+1809">Dominican Republic</option>\n                <option value="+593">Ecuador</option>\n                <option value="+20">Egypt</option>\n                <option value="+503">El Salvador</option>\n                <option value="+240">Equatorial Guinea</option>\n                <option value="+291">Eritrea</option>\n                <option value="+372">Estonia</option>\n                <option value="+251">Ethiopia</option>\n                <option value="+500">Falkland Islands</option>\n                <option value="+298">Faroe Islands</option>\n                <option value="+679">Fiji</option>\n                <option value="+358">Finland</option>\n                <option value="+33">France</option>\n                <option value="+594">French Guiana</option>\n                <option value="+689">French Polynesia</option>\n                <option value="+241">Gabon</option>\n                <option value="+220">Gambia</option>\n                <option value="+995">Georgia</option>\n                <option value="+49">Germany</option>\n                <option value="+233">Ghana</option>\n                <option value="+350">Gibraltar</option>\n                <option value="+30">Greece</option>\n                <option value="+299">Greenland</option>\n                <option value="+1473">Grenada</option>\n                <option value="+590">Guadeloupe</option>\n                <option value="+1671">Guam</option>\n                <option value="+502">Guatemala</option>\n                <option value="+224">Guinea</option>\n                <option value="+245">Guinea Bissau</option>\n                <option value="+592">Guyana</option>\n                <option value="+509">Haiti</option>\n                <option value="+504">Honduras</option>\n                <option value="+852">Hong Kong</option>\n                <option value="+36">Hungary</option>\n                <option value="+354">Iceland</option>\n                <option value="+91">India</option>\n                <option value="+62">Indonesia</option>\n                <option value="+98">Iran</option>\n                <option value="+964">Iraq</option>\n                <option value="+353">Ireland</option>\n                <option value="+972">Israel</option>\n                <option value="+39">Italy</option>\n                <option value="+1876">Jamaica</option>\n                <option value="+81">Japan</option>\n                <option value="+962">Jordan</option>\n                <option value="+7">Kazakhstan</option>\n                <option value="+254">Kenya</option>\n                <option value="+686">Kiribati</option>\n                <option value="+850">Korea, North</option>\n                <option value="+82">Korea, South</option>\n                <option value="+965">Kuwait</option>\n                <option value="+996">Kyrgyzstan</option>\n                <option value="+856">Laos</option>\n                <option value="+371">Latvia</option>\n                <option value="+961">Lebanon</option>\n                <option value="+266">Lesotho</option>\n                <option value="+231">Liberia</option>\n                <option value="+218">Libya</option>\n                <option value="+423">Liechtenstein</option>\n                <option value="+370">Lithuania</option>\n                <option value="+352">Luxembourg</option>\n                <option value="+853">Macao</option>\n                <option value="+389">Macedonia</option>\n                <option value="+261">Madagascar</option>\n                <option value="+265">Malawi</option>\n                <option value="+60">Malaysia</option>\n                <option value="+960">Maldives</option>\n                <option value="+223">Mali</option>\n                <option value="+356">Malta</option>\n                <option value="+692">Marshall Islands</option>\n                <option value="+596">Martinique</option>\n                <option value="+222">Mauritania</option>\n                <option value="+230">Mauritius</option>\n                <option value="+52">Mexico</option>\n                <option value="+691">Micronesia</option>\n                <option value="+373">Moldova</option>\n                <option value="+377">Monaco</option>\n                <option value="+976">Mongolia</option>\n                <option value="+382">Montenegro</option>\n                <option value="+1664">Montserrat</option>\n                <option value="+212">Morocco</option>\n                <option value="+258">Mozambique</option>\n                <option value="+95">Myanmar</option>\n                <option value="+264">Namibia</option>\n                <option value="+674">Nauru</option>\n                <option value="+977">Nepal</option>\n                <option value="+31">Netherlands</option>\n                <option value="+687">New Caledonia</option>\n                <option value="+64">New Zealand</option>\n                <option value="+505">Nicaragua</option>\n                <option value="+227">Niger</option>\n                <option value="+234">Nigeria</option>\n                <option value="+683">Niue</option>\n                <option value="+6723">Norfolk Island</option>\n                <option value="+1">Northern Mariana Islands</option>\n                <option value="+47">Norway</option>\n                <option value="+968">Oman</option>\n                <option value="+92">Pakistan</option>\n                <option value="+680">Palau</option>\n                <option value="+970">Palestine</option>\n                <option value="+507">Panama</option>\n                <option value="+675">Papua New Guinea</option>\n                <option value="+595">Paraguay</option>\n                <option value="+51">Peru</option>\n                <option value="+63">Philippines</option>\n                <option value="+48">Poland</option>\n                <option value="+351">Portugal</option>\n                <option value="+1787">Puerto Rico</option>\n                <option value="+974">Qatar</option>\n                <option value="+262">Reunion</option>\n                <option value="+40">Romania</option>\n                <option value="+7">Russia</option>\n                <option value="+250">Rwanda</option>\n                <option value="+590">Saint Barthlemy</option>\n                <option value="+290">Saint Helena</option>\n                <option value="+1869">Saint Kitts and Nevis</option>\n                <option value="+1758">Saint Lucia</option>\n                <option value="+590">Saint Martin</option>\n                <option value="+508">Saint Pierre and Miquelon</option>\n                <option value="+1784">Saint Vincent Grenadines</option>\n                <option value="+685">Samoa</option>\n                <option value="+378">San Marino</option>\n                <option value="+239">Sao Tome and Principe</option>\n                <option value="+966">Saudi Arabia</option>\n                <option value="+221">Senegal</option>\n                <option value="+381">Serbia</option>\n                <option value="+248">Seychelles</option>\n                <option value="+232">Sierra Leone</option>\n                <option value="+65">Singapore</option>\n                <option value="+1721">Sint Maarten</option>\n                <option value="+421">Slovakia</option>\n                <option value="+386">Slovenia</option>\n                <option value="+677">Solomon Islands</option>\n                <option value="+252">Somalia</option>\n                <option value="+27">South Africa</option>\n                <option value="+211">South Sudan</option>\n                <option value="+34">Spain</option>\n                <option value="+94">Sri Lanka</option>\n                <option value="+249">Sudan</option>\n                <option value="+597">Suriname</option>\n                <option value="+268">Swaziland</option>\n                <option value="+46">Sweden</option>\n                <option value="+41">Switzerland</option>\n                <option value="+963">Syria</option>\n                <option value="+886">Taiwan</option>\n                <option value="+992">Tajikistan</option>\n                <option value="+255">Tanzania</option>\n                <option value="+66">Thailand</option>\n                <option value="+670">Timor-Leste</option>\n                <option value="+228">Togo</option>\n                <option value="+690">Tokelau</option>\n                <option value="+676">Tonga</option>\n                <option value="+1868">Trinidad and Tobago</option>\n                <option value="+216">Tunisia</option>\n                <option value="+90">Turkey</option>\n                <option value="+993">Turkmenistan</option>\n                <option value="+1649">Turks and Caicos</option>\n                <option value="+688">Tuvalu</option>\n                <option value="+256">Uganda</option>\n                <option value="+380">Ukraine</option>\n                <option value="+971">United Arab Emirates</option>\n                <option value="+44">United Kingdom</option>\n                <option value="+1">United States</option>\n                <option value="+598">Uruguay</option>\n                <option value="+998">Uzbekistan</option>\n                <option value="+678">Vanuatu</option>\n                <option value="+379">Vatican City</option>\n                <option value="+58">Venezuela</option>\n                <option value="+84">Vietnam</option>\n                <option value="+1284">Virgin Islands, British</option>\n                <option value="+1340">Virgin Islands, US</option>\n                <option value="+681">Wallis and Futuna</option>\n                <option value="+967">Yemen</option>\n                <option value="+260">Zambia</option>\n                <option value="+263">Zimbabwe</option>\n            </select>\n        <input type="number" placeholder="<%= Constants.ADD_PHONE_NUMBER %>" id="phone">\n    </div>\n    <div class="input-group verify-code-row">\n        <input type="number" placeholder="<%= Constants.ADD_PASS_CODE %>" id="verify-code">\n        <button id="verify-code-button"><%= Constants.TFAUTH_GET_SMS %></button>\n        <p class="errorMsg"></p>\n    </div>\n    <button id="sumbutton" class="opac"><%= Constants.CONFIRM_SUBMIT %></button>\n    <spam class="close hsprite-close"></spam>\n    <span class="error"><a href="http://help.jianguoyun.com/?p=2924" title="">?</a></span>\n</div>';
},0x4017662b84c16:function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_RESULT__=function(){return window.Backbone}.call(exports,__webpack_require__,exports,module),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},5158837218028295:function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_RESULT__=function(){return window.jQuery}.call(exports,__webpack_require__,exports,module),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},7813475321478606:function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_RESULT__=function(){return window._}.call(exports,__webpack_require__,exports,module),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},8589677591391834:function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_RESULT__=function(require,exports,module){var Backbone=__webpack_require__(0x4017662b84c16),Sandbox=(__webpack_require__(7813475321478606),__webpack_require__(8997687829226239)),Utils=__webpack_require__(0xa11a71a4a3102),SandBoxInfo=Sandbox.NSSandboxInfo,SandboxInfos=Backbone.Collection.extend({model:SandBoxInfo,comparator:function(sandboxInfo1,sandboxInfo2){var result;if(sandboxInfo1.isDefaultSandbox())result=-1;else if(sandboxInfo2.isDefaultSandbox())result=1;else{var name1=sandboxInfo1.get("name"),name2=sandboxInfo2.get("name");result=Utils.alphanumSort(name1,name2)}return result},privateSandboxes:function(){return this.filter(function(sandboxInfo){return sandboxInfo.isPrivate()})},sharedSandboxes:function(){return this.filter(function(sandboxInfo){return!sandboxInfo.isPrivate()})},activeSandbox:function(){return this._activeSandbox},setActiveSandbox:function(sandboxInfo){this._activeSandbox=sandboxInfo},accordingSandboxs:function(sandboxInfo){return this.where({magic:sandboxInfo.get("magic"),sandboxId:sandboxInfo.get("sandboxId")})},findSandbox:function(sandboxId,magic){var searchSandboxes=this.where({magic:magic,sandboxId:sandboxId});return searchSandboxes.length>0?searchSandboxes[0]:null},defaultSandbox:function(){var searchSandboxes=this.filter(function(sandboxInfo){return sandboxInfo.isDefaultSandbox()});return searchSandboxes.length>0?searchSandboxes[0]:null}});return SandboxInfos}.call(exports,__webpack_require__,exports,module),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},8997687829226239:function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_RESULT__=function(require,exports,module){function NSSandboxID(sid,magic){this._sid=sid,this._magic=magic}function NSPath(sid,subpath){this._sandboxId=sid,this._subpath=subpath}var Backbone=__webpack_require__(0x4017662b84c16),_=__webpack_require__(7813475321478606),Path=__webpack_require__(6134586780286950);NSSandboxID.prototype.extendQuery=function(v){_.extend(v||{},{sndId:this._sid,sndMagic:this._magic})},NSSandboxID.prototype.toQueryDict=function(v){return{sndId:this._sid,sndMagic:this._magic}};var NSSandboxInfo=Backbone.Model.extend({defaults:{sandboxId:null,magic:null,name:"",desc:"",doNotSync:!1,owner:"",isOwner:!1,isDefault:!1,exclusiveUser:!0,permission:0,usedSpace:0},URL:function(){var protocol=window.location.protocol,host=window.location.host;return protocol+"//"+host+"/c/sd/"+this.get("sandboxId")+"/"+this.get("magic")},queryString:function(){var sandboxID=new NSSandboxID(this.get("sandboxId"),this.get("magic"));return $.param(sandboxID.toQueryDict())},queryDict:function(){var sandboxID=new NSSandboxID(this.get("sandboxId"),this.get("magic"));return sandboxID.toQueryDict()},getName:function(){var name=this.get("name");return this.get("isDefault")&&""===name?Constants.DEFAULT_SANDBOX_TITLE:name},setCurrentPath:function(path){this._currentPath=path},getCurrentPath:function(){return this._currentPath||"/"},isPrivate:function(){return this.get("isOwner")&&(this.get("isDefault")||this.get("exclusiveUser"))},isOwner:function(){return this.get("isOwner")},isEqualTo:function(sandboxInfo){return this.get("magic")===sandboxInfo.get("magic")&&this.get("sandboxId")===sandboxInfo.get("sandboxId")},isDefaultSandbox:function(){return this.isOwner()&&this.get("isDefault")},isPublicIn:function(){return!this.isPrivate()&&!this.get("isOwner")},isPublicOut:function(){return!this.isPrivate()&&this.get("isOwner")},isPathACLSet:function(checkPath){for(var acls=this.get("acls")||[],i=0;i<acls.length;i++){var acl=acls[i];if(checkPath===acl.path)return!0}return!1},markACLSet:function(checkPath){for(var acls=this.get("acls")||[],i=0;i<acls.length;i++){var acl=acls[i];if(checkPath===acl.path)return}acls.push({acl:{},path:checkPath})},cleanACLOnPath:function(checkPath){for(var acls=this.get("acls")||[],toDelete=null,i=0;i<acls.length;i++){var acl=acls[i];if(checkPath===acl.path){toDelete=acl;break}}toDelete&&this.set("acls",_.without(acls,toDelete))},readWriteKeysForPath:function(path){if(this.isOwner())return["read","write","preview"];for(var keys=[],prevPath=null,pathPerms=this.get("pathPerms")||[],i=0;i<pathPerms.length;i++){var pathPerm=pathPerms[i],aclPath=pathPerm.path,capability=(pathPerm.permission,pathPerm.caps),permKeys=this._keysFromCapability(capability);if(aclPath===path){keys=permKeys;break}Path.isParentPath(path,aclPath)&&(prevPath&&!Path.isParentPath(aclPath,prevPath)||(prevPath=aclPath,keys=permKeys))}return keys=keys.length>0?keys:["none"]},isAdminOnPath:function(path){if(this.isOwner())return!0;var permKeys=this.readWriteKeysForPath(path);return permKeys.indexOf("admin")>-1},permsForPath:function(path){var permKeys=this.readWriteKeysForPath(path),isOwner=this.isOwner(),hasRead=permKeys.length>0&&_.indexOf(permKeys,"read")>-1,hasWrite=permKeys.length>0&&_.indexOf(permKeys,"write")>-1,hasPreview=permKeys.length>0&&_.indexOf(permKeys,"preview")>-1,isAdmin=permKeys.length>0&&_.indexOf(permKeys,"admin")>-1,isPreviewOnly=1===permKeys.length&&"preview"===permKeys[0],isBrowseOnly=1===permKeys.length&&"none"===permKeys[0],result={isOwner:isOwner,isAdmin:isOwner||isAdmin,isReadWrite:hasRead&&hasWrite,isReadOnly:hasRead&&!hasWrite,isWriteOnly:!hasRead&&hasWrite,isPreviewOnly:isPreviewOnly,isBrowseOnly:isBrowseOnly,hasPreview:hasPreview};return{keys:permKeys,result:result}},_keysFromCapability:function(capability){var keys=[];return 2===(2&capability)&&keys.push("read"),4===(4&capability)&&keys.push("write"),8===(8&capability)&&keys.push("admin"),(11&capability)>0&&keys.push("preview"),keys}}),SandboxParser=function(){var parse=function(data){var info={sandboxId:data.sandboxId,magic:data.magic,name:data.name,desc:data.desc,owner:data.owner,isOwner:data.isOwner,isDefault:data.isDefault,permission:data.permission,usedSpace:data.usedSpace,pathPerms:data.pathPerms};return new NSSandboxInfo(info)};return{parse:parse}}();return{NSSandboxID:NSSandboxID,NSPath:NSPath,NSSandboxParser:SandboxParser,NSSandboxInfo:NSSandboxInfo}}.call(exports,__webpack_require__,exports,module),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},7097896355547116:function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_RESULT__=function(require,exports,module){var Backbone=__webpack_require__(0x4017662b84c16),UserInfo=(__webpack_require__(7813475321478606),Backbone.Model.extend({defaults:{freeDownRate:1,freeUpRate:1,totalUsedStorage:0,storageQuota:0,usedUpRate:0,usedDownRate:0,nickName:"",userName:"",accountState:1,servicePlan:"",accountExpireLeftTime:0,freeRateResetLeftTime:0,language:"zh",teamEdition:0,phoneVerified:!1,freeUser:!1},isExpired:function(){return this.get("accountExpireLeftTime")<=0},isSpaceExhausted:function(){var leftedStorage=this.get("storageQuota")-this.get("totalUsedStorage");return leftedStorage<=0},displayName:function(limit){return this.get("nickName")||this.get("userName")},isAccountFrozened:function(){return 6===this.get("accountState")||1!==this.get("accountState")&&this.isExpired()},isFreeUser:function(){return 1===this.get("accountState")},freeRateLeftMiliseconds:function(){return this.get("rateResetLeftMills")},isTeamUser:function(){return 4===this.get("accountState")||5===this.get("accountState")},totalFreeDownRate:function(){return this.get("freeDownRate")+this.get("usedDownRate")},totalFreeUpRate:function(){return this.get("freeUpRate")+this.get("usedUpRate")},getHistoricalVersionMonth:function(){var month=1===this.get("accountState")?"1":"3";return 4!=this.get("accountState")&&5!=this.get("accountState")||(month=1===this.get("servicePlan")?"6":"12"),month}}));return UserInfo}.call(exports,__webpack_require__,exports,module),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},0x6bc32e380f8b3:function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_RESULT__=function(require,exports,module){function isLogined(){return _isFetchedOnce}function parseData(data){parseUserInfo(data);var sandboxes=_.map(data.sandboxes||[],function(object,index){var boxObjects=parseSingleSandBox(object);return boxObjects});_sandboxes.reset(sandboxes)}function parseUserInfo(data){_info.set(data)}function parseSingleSandBox(sandboxData){return sandboxData}var $=__webpack_require__(5158837218028295),_=__webpack_require__(7813475321478606),Sandbox=(__webpack_require__(0x4017662b84c16),__webpack_require__(7338194579372937),__webpack_require__(8997687829226239)),UserInfo=(Sandbox.NSSandboxInfo,__webpack_require__(7097896355547116)),SandboxInfos=__webpack_require__(8589677591391834),_data={},_info=new UserInfo,_sandboxes=new SandboxInfos,_isFetchedOnce=!1,InfoManager={};return InfoManager.load=function(success,fail,complete){var url="/d/ajax/userop/getUserInfo";isLogined()||(url+="?start=1"),$.ajax({url:url,type:"GET",dataType:"json",cache:!1,error:function(xhr,status,error){_.isFunction(fail)&&fail(xhr,status,error)},success:function(data,textStatus,xhr){200===xhr.status&&_.isObject(data)&&(_data=data,parseData(data),_.isFunction(success)&&success(),_isFetchedOnce=!0)},complete:function(){_.isFunction(complete)&&complete()}})},InfoManager.info=function(){return _info},InfoManager.sandboxes=function(){return _sandboxes},InfoManager}.call(exports,__webpack_require__,exports,module),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))}});